<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Mybatis/Mybatis-Plus | Devil的个人博客</title><meta name="keywords" content="database"><meta name="author" content="Devil"><meta name="copyright" content="Devil"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MyBatis第一章(ssm &#x3D; spring + springmvc + mybatis) 三层架构界面层： 和用户打交道的， 接收用户的请求参数， 显示处理结果的。（jsp ，html ，servlet）业务逻辑层： 接收了界面层传递的数据，计算逻辑，调用数据库，获取数据数据访问层： 就是访问数据库， 执行对数据的查询，修改，删除等等的。  三层对应的包  界面层： controll">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatis&#x2F;Mybatis-Plus">
<meta property="og:url" content="https://devildyw.github.io/2022/02/28/MyBatis/index.html">
<meta property="og:site_name" content="Devil的个人博客">
<meta property="og:description" content="MyBatis第一章(ssm &#x3D; spring + springmvc + mybatis) 三层架构界面层： 和用户打交道的， 接收用户的请求参数， 显示处理结果的。（jsp ，html ，servlet）业务逻辑层： 接收了界面层传递的数据，计算逻辑，调用数据库，获取数据数据访问层： 就是访问数据库， 执行对数据的查询，修改，删除等等的。  三层对应的包  界面层： controll">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-6omo76.jpg">
<meta property="article:published_time" content="2022-02-28T12:58:54.000Z">
<meta property="article:modified_time" content="2022-04-09T09:49:12.348Z">
<meta property="article:author" content="Devil">
<meta property="article:tag" content="database">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-6omo76.jpg"><link rel="shortcut icon" href="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/favicon.png"><link rel="canonical" href="https://devildyw.github.io/2022/02/28/MyBatis/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mybatis/Mybatis-Plus',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-09 17:49:12'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/dyw.css"><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Devil的个人博客" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/avatar.png" onerror="onerror=null;src='https://tva1.sinaimg.cn/large/832afe33ly1gbi8718jtpg20r00lc776.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> 自我介绍</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-6omo76.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Devil的个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> 自我介绍</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Mybatis/Mybatis-Plus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-28T12:58:54.000Z" title="发表于 2022-02-28 20:58:54">2022-02-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-09T09:49:12.348Z" title="更新于 2022-04-09 17:49:12">2022-04-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/">持久层框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Mybatis/Mybatis-Plus"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a><strong>MyBatis</strong></h1><h2 id="第一章-ssm-x3D-spring-springmvc-mybatis"><a href="#第一章-ssm-x3D-spring-springmvc-mybatis" class="headerlink" title="第一章(ssm &#x3D; spring + springmvc + mybatis)"></a><strong>第一章(ssm &#x3D; spring + springmvc + mybatis)</strong></h2><ol>
<li>三层架构<br>界面层： 和用户打交道的， 接收用户的请求参数， 显示处理结果的。（jsp ，html ，servlet）<br>业务逻辑层： 接收了界面层传递的数据，计算逻辑，调用数据库，获取数据<br>数据访问层： 就是访问数据库， 执行对数据的查询，修改，删除等等的。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">三层对应的包</span><br><span class="line">  界面层： controller包 （servlet）</span><br><span class="line">  业务逻辑层： service 包（XXXService类）</span><br><span class="line">  数据访问层： dao包（XXXDao类）</span><br></pre></td></tr></table></figure>


<pre><code> 三层中类的交互
   用户使用界面层--&gt; 业务逻辑层---&gt;数据访问层（持久层）--&gt;数据库（mysql）
</code></pre>
<p>​     三层对应的处理框架<br>​       界面层—servlet—springmvc（框架）<br>​       业务逻辑层—service类–spring（框架）<br>​       数据访问层—dao类–mybatis（框架）</p>
  <span id="more"></span>

<p> 2.框架<br>   框架是一个舞台， 一个模版</p>
<p>   模版：<br>     1. 规定了好一些条款，内容。<br>          2. 加入自己的东西</p>
<p>   框架是一个模块<br>    1.框架中定义好了一些功能。这些功能是可用的。<br>    2.可以加入项目中自己的功能， 这些功能可以利用框架中写好的功能。</p>
<p>   框架是一个软件，半成品的软件，定义好了一些基础功能， 需要加入你的功能就是完整的。<br>   基础功能是可重复使用的，可升级的。</p>
<p>   框架特点：<br>    1. 框架一般不是全能的， 不能做所有事情<br>        2. 框架是针对某一个领域有效。 特长在某一个方面，比如mybatis做数据库操作强，但是他不能做其它的。<br>        3. 框架是一个软件</p>
<p> mybatis框架<br>   一个框架，早期叫做ibatis,  代码在github。<br>   mybatis是 MyBatis SQL Mapper Framework for Java （sql映射框架）<br>   1）sql mapper :sql映射<br>         可以把数据库表中的一行数据  映射为 一个java对象。<br>     一行数据可以看做是一个java对象。操作这个对象，就相当于操作表中的数据</p>
<p>   2） Data Access Objects（DAOs） : 数据访问 ， 对数据库执行增删改查。</p>
<p> mybatis提供了哪些功能：</p>
<ol>
<li>提供了创建Connection ,Statement, ResultSet的能力 ，不用开发人员创建这些对象了</li>
<li>提供了执行sql语句的能力， 不用你执行sql</li>
<li>提供了循环sql， 把sql的结果转为java对象， List集合的能力<br> while (rs.next()) {<br>   Student stu &#x3D; new Student();<br>   stu.setId(rs.getInt(“id”));<br>   stu.setName(rs.getString(“name”));<br>   stu.setAge(rs.getInt(“age”));<br>   &#x2F;&#x2F;从数据库取出数据转为 Student 对象，封装到 List 集合<br>   stuList.add(stu);<br> }</li>
</ol>
<pre><code>4.提供了关闭资源的能力，不用你关闭Connection, Statement, ResultSet
</code></pre>
<p> 开发人员做的是： 提供sql语句<br> 最后是： 开发人员提供sql语句–mybatis处理sql—开发人员得到List集合或java对象（表中的数据）</p>
<p> 总结：<br>  mybatis是一个sql映射框架，提供的数据库的操作能力。增强的JDBC,<br>  使用mybatis让开发人员集中精神写sql就可以了，不必关心Connection,Statement,ResultSet<br>  的创建，销毁，sql的执行。 </p>
<h2 id="第二章："><a href="#第二章：" class="headerlink" title="第二章："></a><strong>第二章：</strong></h2><p>  1 主要类的介绍<br>   1） Resources： mybatis中的一个类， 负责读取主配置文件<br>      InputStream in &#x3D; Resources.getResourceAsStream(“mybatis.xml”);</p>
<pre><code>2)SqlSessionFactoryBuilder : 创建SqlSessionFactory对象， 
     SqlSessionFactoryBuilder builder  = new SqlSessionFactoryBuilder();
    //创建SqlSessionFactory对象
    SqlSessionFactory factory = builder.build(in);
</code></pre>
<p>  3）SqlSessionFactory ： 重量级对象， 程序创建一个对象耗时比较长，使用资源比较多。<br>        在整个项目中，有一个就够用了。</p>
<pre><code> SqlSessionFactory:接口  ， 接口实现类： DefaultSqlSessionFactory
  SqlSessionFactory作用： 获取SqlSession对象。SqlSession sqlSession = factory.openSession();

  openSession()方法说明：
   1. openSession() ：无参数的， 获取是非自动提交事务的SqlSession对象
    2. openSession(boolean): openSession(true)  获取自动提交事务的SqlSession. 
                             openSession(false)  非自动提交事务的SqlSession对象
</code></pre>
<p> 4)SqlSession:<br>   SqlSession接口 ：定义了操作数据的方法 例如 selectOne() ,selectList() ,insert(),update(), delete(), commit(), rollback()<br>   SqlSession接口的实现类DefaultSqlSession。</p>
<pre><code>使用要求： SqlSession对象不是线程安全的，需要在方法内部使用， 在执行sql语句之前，使用openSession()获取SqlSession对象。
在执行完sql语句后，需要关闭它，执行SqlSession.close(). 这样能保证他的使用是线程安全的。
</code></pre>
<h2 id="第三章："><a href="#第三章：" class="headerlink" title="第三章："></a><strong>第三章：</strong></h2><ol>
<li><p>动态代理： 使用SqlSession.getMapper(dao接口.class) 获取这个dao接口的对象</p>
</li>
<li><p>传入参数： 从java代码中把数据传入到mapper文件的sql语句中。<br>1）parameterType ： 写在mapper文件中的 一个属性。 表示dao接口中方法的参数的数据类型。<br>例如StudentDao接口<br> public Student  selectStudentById(Integer id) </p>
<ol start="2">
<li>一个简单类型的参数：<br>简单类型： mybatis把java的基本数据类型和String都叫简单类型。<br>在mapper文件获取简单类型的一个参数的值，使用 #{任意字符}</li>
</ol>
<p> 接口：public Student  selectStudentById(Integer id)<br> mapper:select id,name, email,age from student where id&#x3D;#{studentId}</p>
</li>
</ol>
<pre><code>3) 多个参数，使用@Param命名参数
  接口 public List&lt;Student&gt; selectMulitParam(@Param(&quot;myname&quot;) String name, @Param(&quot;myage&quot;) Integer age)
  使用  @Param(&quot;参数名&quot;)  String name 
 mapper文件：
     &lt;select&gt;
         select * from student where name=#&#123;myname&#125; or age=#&#123;myage&#125;
      &lt;/select&gt;

4) 多个参数，使用java对象
   语法 #&#123;属性名&#125;
</code></pre>
<p>   vo: value object , 放一些存储数据的类。比如说 提交请求参数， name ,age<br>         现在想把name ,age 传给一个service 类。</p>
<p>   vo: view object , 从servlet把数据返回给浏览器使用的类，表示显示结果的类。</p>
<p>   pojo: 普通的有set， get方法的java类。 普通的java对象</p>
<pre><code>      Servlet --- StudentService( addStudent( MyParam  param)  )
</code></pre>
<p>   entity（domain域）: 实体类， 和数据库中的表对应的类， </p>
<pre><code>5) # 和  $

  select id,name, email,age from student where id=#&#123;studentId&#125;
  # 的结果： select id,name, email,age from student where id=? 


   select id,name, email,age from student where id=$&#123;studentId&#125;
  $ 的结果：select id,name, email,age from student where id=1001

  String sql=&quot;select id,name, email,age from student where id=&quot; + &quot;1001&quot;;
  使用的Statement对象执行sql， 效率比PreparedStatement低。


  $:可以替换表名或者列名， 你能确定数据是安全的。可以使用$


  # 和 $区别
  1. #使用 ？在sql语句中做站位的， 使用PreparedStatement执行sql，效率高
  2. #能够避免sql注入，更安全。
  3. $不使用占位符，是字符串连接方式，使用Statement对象执行sql，效率低
  4. $有sql注入的风险，缺乏安全性。
  5. $:可以替换表名或者列名
</code></pre>
<ol start="3">
<li><p>mybatis的输出结果<br>mybatis执行了sql语句，得到java对象。</p>
<p> 1）resultType结果类型， 指sql语句执行完毕后， 数据转为的java对象， java类型是任意的。<br>   resultType结果类型的它值 1. 类型的全限定名称   2. 类型的别名， 例如 java.lang.Integer别名是int</p>
<pre><code>处理方式：
   1. mybatis执行sql语句， 然后mybatis调用类的无参数构造方法，创建对象。
    2. mybatis把ResultSet指定列值付给同名的属性。


    &lt;select id=&quot;selectMultiPosition&quot; resultType=&quot;com.bjpowernode.domain.Student&quot;&gt;
  select id,name, email,age from student
&lt;/select&gt;

  对等的jdbc
  ResultSet rs = executeQuery(&quot; select id,name, email,age from student&quot; )
  while(rs.next())&#123;
       Student  student = new Student();
            student.setId(rs.getInt(&quot;id&quot;));
            student.setName(rs.getString(&quot;name&quot;))
  &#125;
</code></pre>
</li>
</ol>
<ol start="2">
<li>定义自定义类型的别名<br> 1）在mybatis主配置文件中定义，使<typeAlias>定义别名<br>  2）可以在resultType中使用自定义别名</li>
</ol>
<p>   3）resultMap:结果映射， 指定列名和java对象的属性对应关系。<br>        1）你自定义列值赋值给哪个属性<br>         2）当你的列名和属性名不一样时，一定使用resultMap</p>
<pre><code>     resultMap和resultType不要一起用，二选一
</code></pre>
<p>dao接口中的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 演示使用ResultMap</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> List&lt;Student&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Student&gt; <span class="title function_">selectStudents</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>StudentDao.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用ResultMap 必须先定义ResultMap</span></span><br><span class="line"><span class="comment">可以防止实体类中的属性名与数据库表中的列名的不同的囧境--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--定义ResultMap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.dyw.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--主键列使用 id标签</span></span><br><span class="line"><span class="comment">        column 表的列名</span></span><br><span class="line"><span class="comment">        property java类型的属性名</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--非主键列使用result标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentMap&quot;</span>&gt;</span></span><br><span class="line">    select id,name,age from student order by id;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>输出:</p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220111153344824.png" alt="image-20220111153344824"></p>
<p><strong>注意</strong>:如果Dao接口使用Map作为返回结果的话 需要在ResultType中配置Map的全限定名称 而不是实体类的名称(如果返回值为List则依旧使用实体类的全限定名称) 并且返回的结果是以列名作为键 列值作为值  </p>
<h2 id="第四章动态sql"><a href="#第四章动态sql" class="headerlink" title="第四章动态sql"></a><strong>第四章动态sql</strong></h2><h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询:"></a>模糊查询:</h4><p>​    **like:**在dao.xml配置文件中 直接使用like即可 当使用#{}拼接时 我们前面说过 他是以占位符?(即preparedStatement)所以格式为</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--模糊查询的两种方式</span></span><br><span class="line"><span class="comment">        1.直接传入一个字符串 类似与%丁%</span></span><br><span class="line"><span class="comment">        2.使用字符串拼接</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentsByLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.dyw.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age from student where name like &quot;%&quot; #&#123;name&#125; &quot;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">底层为</span><br><span class="line"><span class="comment">&lt;!--Preparing: select id,name,age from student where name like &quot;%&quot; ? &quot;%&quot;--&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    但是使用${}时不一样它是使用Statement即字符串拼接 所以格式为</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentsByLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.dyw.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select id,name,age from student where name like &quot;%$&#123;name&#125;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">底层</span><br><span class="line"><span class="comment">&lt;!--Preparing: select id,name,age from student where name like &quot;%丁%&quot;--&gt;</span></span><br></pre></td></tr></table></figure>



<p> 动态sql: sql的内容是变化的，可以根据条件获取到不同的sql语句。<br>           主要是where部分发生变化。</p>
<p> 动态sql的实现，使用的是mybatis提供的标签， <if> ,<where>,<foreach></p>
<p> 1)<if>是判断条件的，<br>   语法<if test="判断java对象的属性值"><br>            部分sql语句<br>        </if></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用标签&lt;if&gt;可以判断条件 如果条件满足要求则将条件拼接在where后 可以防止sql运行时报错--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    多个if拼接的时候一般在where后面加一个1=1 保证拼接时不会出错</span></span><br><span class="line"><span class="comment">        注意使用动态sql语句 一定要传java对象作为参数</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentsByLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.dyw.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">    select id,name,age from student</span><br><span class="line">        where 1=1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name !=null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and name like #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age &gt; 0&quot;</span>&gt;</span></span><br><span class="line">            and age &gt; #&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但这样有弊端，就是为了避免拼接错误，需要使用or 1&#x3D;1， 但是这样又会导致另一个错误，那就是可以会将所有的内容都查出来，这是我们不想看到的。</p>
<p> 2)<where> 用来包含 多个<if>的， 当多个if有一个成立的， <where>会自动增加一个where关键字，<br>            并去掉 if中多余的 and ，or等。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用where标签时就不会出现拼接错误现象 底层会自动判别然后进行拼接 可以自动去除and or等连接词比直接用&lt;if&gt;安全性好--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentsByLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.dyw.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">    select id,name,age from student</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null and name !=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and name like #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age &gt; 0&quot;</span>&gt;</span></span><br><span class="line">            and age &gt;#&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    使用&lt; where&gt;标签就不会出现上述&lt; if&gt;的情况 &lt; where&gt;标签可以智能帮助我们去除and or 等 防止拼接错误</p>
<p> 3）<foreach> 循环java中的数组，list集合的。 主要用在sql的in语句中。(用于当传入的参数为集合时 为了获取里面的数据)<br>    学生id是 1001,1002,1003的三个学生</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">select * from student where id <span class="title function_">in</span> <span class="params">(<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">selectFor</span><span class="params">(List&lt;Integer&gt; idlist)</span></span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> ...</span><br><span class="line">list.add(<span class="number">1001</span>);</span><br><span class="line">list.add(<span class="number">1002</span>);</span><br><span class="line">list.add(<span class="number">1003</span>);</span><br><span class="line"></span><br><span class="line">dao.selectFor(list)</span><br></pre></td></tr></table></figure>


<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;&quot;</span> <span class="attr">item</span>=<span class="string">&quot;&quot;</span> <span class="attr">open</span>=<span class="string">&quot;&quot;</span> <span class="attr">close</span>=<span class="string">&quot;&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">         #&#123;xxx&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"></span><br><span class="line">collection:表示接口中的方法参数的类型， 如果是数组使用array , 如果是list集合使用list</span><br><span class="line"> item:自定义的，表示数组和集合成员的变量</span><br><span class="line"> open:循环开始是的字符</span><br><span class="line"> close:循环结束时的字符</span><br><span class="line">separator:集合成员之间的分隔符</span><br></pre></td></tr></table></figure>

<p>  4）sql代码片段， 就是复用一些语法<br>    步骤<br>     1.先定义 <sql id="自定义名称唯一">  sql语句， 表名，字段等 </sql><br>    2.再使用， <include refid="id的值" /></p>
<h2 id="第五章："><a href="#第五章：" class="headerlink" title="第五章："></a><strong>第五章：</strong></h2><ol>
<li>数据库的属性配置文件： 把数据库连接信息放到一个单独的文件中。 和mybatis主配置文件分开。<br>目的是便于修改，保存，处理多个数据库的信息。<br><!--便于维护,管理与使用--><ol>
<li><p>在resources目录中定义一个属性配置文件， xxxx.properties ,例如 jdbc.properties<br>   在属性配置文件中， 定义数据，格式是 key&#x3D;value<br>     key： 一般使用 . 做多级目录的。<br>     例如 jdbc.mysql.driver    , jdbc.driver, mydriver<br>     jdbc.driver&#x3D;com.mysql.jdbc.Driver<br>     jdbc.url&#x3D;jdbc:mysql&#x2F;&#x2F;…..<br>     jdbc.username&#x3D;root<br>     jdbc.password&#x3D;123456</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--指定properties文件路径 从类路径根开始查找--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>​     </p>
</li>
<li><p>在mybatis的主配置文件，使用<property> 指定文件的位置<br> 在需要使用值的地方， ${key}</p>
</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.user&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<p> 2.mapper文件，使用package指定路径<br>    在MyBatis-config文件中可以指定多个mapper文件 第一个中方式直接在<mappers></mappers>中加入多个<mapper/><br>    注意mapper的路径从类路径的根开始(target&#x2F;classes)<br>     <mappers></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">    <span class="comment">&lt;!--第二种方式： 使用包名</span></span><br><span class="line"><span class="comment">        name: xml文件（mapper文件）所在的包名, 这个包中所有xml文件一次都能加载给mybatis</span></span><br><span class="line"><span class="comment">        使用package的要求：</span></span><br><span class="line"><span class="comment">         1. mapper文件名称需要和接口名称一样， 区分大小写的一样</span></span><br><span class="line"><span class="comment">         2. mapper文件和dao接口需要在同一目录</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.bjpowernode.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="第六章：PageHelper"><a href="#第六章：PageHelper" class="headerlink" title="第六章：PageHelper"></a><strong>第六章：PageHelper</strong></h2><p> <strong>PageHelper做数据分页的。</strong>(国人写的)</p>
<ol>
<li><p>maven中添加依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>在MyBatis-config中配置插件<br>注意:<strong>MyBatis-config配置顺序如下properties, settings,plugins</strong>;</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--在&lt;plugins&gt;标签中配置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置pageHelper插件放在setting后面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>配置完成后在使用时调用 pagehelper.startpage(页码(int),每页显示条数(int))方法 注意放在执行sql语句之前 输出会自动显示参数指定的几条</p>
</li>
</ol>
<hr>
<h2 id="MyBatis的缓存机制"><a href="#MyBatis的缓存机制" class="headerlink" title="MyBatis的缓存机制"></a><strong>MyBatis的缓存机制</strong></h2><p>​                                                                            <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000041193993">https://segmentfault.com/a/1190000041193993</a></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">缓存机制减轻数据库压力，提高数据库性能</span><br><span class="line">mybatis的缓存分为两级：一级缓存、二级缓存</span><br></pre></td></tr></table></figure>

<h4 id="一级缓存"><a href="#一级缓存" class="headerlink" title="一级缓存:"></a><strong>一级缓存</strong>:</h4><p>​    一级缓存为 <code>sqlsession</code> 缓存，缓存的数据只在 SqlSession 内有效。在操作数据库的时候需要先  创建 SqlSession 会话对象，在对象中有一个 HashMap 用于存储缓存数据，此 HashMap 是当前    会话对象私有的，别的 SqlSession 会话对象无法访问。</p>
<p>​    具体流程：</p>
<p>​    第一次执行 select 完毕会将查到的数据写入 <strong>SqlSession</strong> 内的 <strong>HashMap</strong> 中缓存起来</p>
<p>​    第二次执行(可能多次) select 会从<strong>缓存</strong>中查数据，如果 select 同传参数一样，那么就能从缓存中返回数据，不用去数据库了，从而提高了效率</p>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a><strong>注意：</strong></h4><p>​    1、如果 在<strong>同</strong>一个SqlSession 执行了 DML 操作（insert、update、delete），并 commit 了，那么 mybatis 就会清空当前 SqlSession 缓存中的所有缓存数据，这样可以保证缓存中的存的数据永远和数据库中一致，避免出现差异</p>
<p>​    2、当一个 SqlSession 结束后那么他里面的一级缓存也就不存在了， mybatis 默认是开启一级缓存且默认作用范围时SESSION，也可以手动配置为STATEMENT(让一级缓存仅针对当前执行的<code>SQL</code>语句生效；)，不需要配置二级缓存默认时没有开启的为false 需要手动在Mybatis-config中配置(<setting></setting>中)</p>
<p>​    3、 mybatis 的缓存是基于 [namespace:sql语句:参数] 来进行缓存的，意思就是， SqlSession 的 HashMap 存储缓存数据时，是使用 [namespace:sql:参数] 作为 key ，查询返回的语句作为 value 保存的,**即{key&#x3D;namespace:sql:参数，value&#x3D;查询到的数据}**。</p>
<p>​    4. 不同会话持有不同的一级缓存，本会话内的操作不会影响其它会话内的一级缓存。</p>
<h4 id="二级缓存"><a href="#二级缓存" class="headerlink" title="二级缓存"></a><strong>二级缓存</strong></h4><p>二级缓存是<code> mapper</code> 级别的缓存，也就是同一个 namespace 的 mapper.xml ，当多个 SqlSession 使用同一个 Mapper 操作数据库的时候，得到的数据会缓存在同一个二级缓存区域</p>
<p>二级缓存默认是没有开启的。需要在 setting 全局参数中配置开启二级缓存</p>
<p>开启二级缓存步骤：</p>
<p>1、<code>conf.xml</code> 配置全局变量开启二级缓存</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span>默认是false：关闭二级缓存</span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、在<code>userMapper.xml</code>中配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;LRU&quot;</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.ibatis.cache.impl.PerpetualCache&quot;</span> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">size</span>=<span class="string">&quot;512&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span>当前mapper下所有语句开启二级缓存</span><br></pre></td></tr></table></figure>

<p>这里配置了一个 LRU 缓存，并每隔60秒刷新，最大存储512个对象，而返回的对象是只读的</p>
<p>若想禁用当前<code>select</code>语句的二级缓存，添加 <code>useCache=&quot;false&quot;</code>修改如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCountByName&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.util.Map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>具体流程：</p>
<p>1.当一个<code>sqlseesion</code>执行了一次<code> select</code> 后，在关闭此<code> session</code> 的时候，会将查询结果缓存到二级缓存</p>
<p>2.当另一个<code>sqlsession</code>执行<code> select</code> 时，（前提二级缓存开启时）首先会在他自己的二级缓存中找，如果没找到，就回去一级缓存中找，找到了就返回，就不用去数据库了，从而减少了数据库压力提高了性能</p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意:"></a>注意:</h4><ol>
<li><p>如果 <code>SqlSession</code> 执行了 DML 操作<code>（insert、update、delete）</code>，并 <code>commit</code> 了，那么 <code>mybatis</code> 就会清空当前<code> mapper</code> 缓存中的所有缓存数据，这样可以保证缓存中的存的数据永远和数据库中一致，避免出现差异（如果没有commit）就不会清空mybatis中的二级缓存</p>
</li>
<li><p><code> mybatis</code> 的缓存是基于<code>[namespace:sql语句:参数]</code>来进行缓存的，意思就是，<code>SqlSession</code> 的 <code>HashMap</code> 存储缓存数据时，是使用 <code>[namespace:sql:参数] </code>作为 <code>key</code> ，查询返回的语句作为 <code>value</code> 保存的。</p>
</li>
<li><p><code>Mybatis</code>中需要在映射文件中添加<code>&lt;cache&gt;</code>标签来为映射文件配置二级缓存，也可以在映射文件中添加<code>&lt;cache-ref&gt;</code>标签来引用其它映射文件的二级缓存以达到多个映射文件持有同一份二级缓存的效果。</p>
</li>
<li><p><cache-ref namespace="com.mybatis.learn.dao.BookMapper"/>该语句可以在另一个mybatis-mapper中指定二级缓存（一个mapper拥有一个二级缓存 这里指定了缓存的指向）这样两个mapper可以共享一个二级缓存</p>
<hr>
</li>
</ol>
<p><strong><code>&lt;cache&gt;</code>标签如下所示。</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>含义</th>
<th>默认值</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>eviction</strong></td>
<td>缓存淘汰策略。<strong>LRU</strong>表示最近使用频次最少的优先被淘汰；<strong>FIFO</strong>表示先被缓存的会先被淘汰；<strong>SOFT</strong>表示基于软引用规则来淘汰；<strong>WEAK</strong>表示基于弱引用规则来淘汰</td>
<td><strong>LRU</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>flushInterval</strong></td>
<td>缓存刷新间隔。单位毫秒</td>
<td>空，表示永不过期</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>缓存的类型</td>
<td><code>PerpetualCache</code>(永久缓存)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>size</strong></td>
<td>最多缓存的对象个数</td>
<td>1024</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>blocking</strong></td>
<td>缓存未命中时是否阻塞</td>
<td><strong>false</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>readOnly</strong></td>
<td>缓存中的对象是否只读。配置为<strong>true</strong>时，表示缓存对象只读，命中缓存时会直接将缓存的对象返回，性能更快，但是线程不安全；配置为<strong>false</strong>时，表示缓存对象可读写，命中缓存时会将缓存的对象克隆然后返回克隆的对象，性能更慢，但是线程安全</td>
<td><strong>false</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th>含义</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>namespace</strong></td>
<td>其它映射文件的命名空间，设置之后则当前映射文件将和其它映射文件将持有同一份二级缓存</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="left"></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="MyBatis-Plus"><a href="#MyBatis-Plus" class="headerlink" title="MyBatis-Plus"></a><strong>MyBatis-Plus</strong></h1><p><strong>注意</strong>：引入 <code>MyBatis-Plus</code> 之后请不要再次引入 <code>MyBatis</code> 以及 <code>MyBatis-Spring</code>，以避免因版本差异导致的问题。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h2><p><a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>（简称 MP）是一个 <a target="_blank" rel="noopener" href="https://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>
<blockquote>
<p> 愿景</p>
<p>我们的愿景是成为 MyBatis 最好的搭档，就像 <a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/img/contra.jpg">魂斗罗</a> 中的 1P、2P，基友搭配，效率翻倍。</p>
</blockquote>
<h3 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h3><ul>
<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求</li>
<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li><strong>内置性能分析插件</strong>：可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
</ul>
<h3 id="支持数据库"><a href="#支持数据库" class="headerlink" title="#支持数据库"></a><a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/#%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E5%BA%93">#</a>支持数据库</h3><blockquote>
<p>任何能使用 <code>mybatis</code> 进行 CRUD, 并且支持标准 SQL 的数据库，具体支持情况如下，如果不在下列表查看分页部分教程 PR 您的支持。</p>
</blockquote>
<ul>
<li>mysql，oracle，db2，h2，hsql，sqlite，postgresql，sqlserver，Phoenix，Gauss ，clickhouse，Sybase，OceanBase，Firebird，cubrid，goldilocks，csiidb</li>
<li>达梦数据库，虚谷数据库，人大金仓数据库，南大通用(华库)数据库，南大通用数据库，神通数据库，瀚高数据库</li>
</ul>
<h3 id="框架结构"><a href="#框架结构" class="headerlink" title="#框架结构"></a><a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/#%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84">#</a>框架结构</h3><p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/mybatis-plus-framework.jpg" alt="framework"></p>
<p><strong>就是在mybatis的基础上再次简化操作 让原来需要程序员写的curd代码都节省了</strong> 同时还优化了性能</p>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a><strong>快速开始</strong></h2><h4 id="一：创建一个boot工程（SpringBoot-Initializr）"><a href="#一：创建一个boot工程（SpringBoot-Initializr）" class="headerlink" title="一：创建一个boot工程（SpringBoot Initializr）"></a>一：创建一个boot工程（SpringBoot Initializr）</h4><p>勾选SQL中的MySQL Driver</p>
<h4 id="二：引入mybatis-plus相关依赖"><a href="#二：引入mybatis-plus相关依赖" class="headerlink" title="二：引入mybatis-plus相关依赖"></a>二：引入mybatis-plus相关依赖</h4><p>引入 Spring Boot Starter 父工程：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>spring-latest-version<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>引入 <code>spring-boot-starter</code>、<code>spring-boot-starter-test</code>、<code>mybatis-plus-boot-starter</code> <code>、mysql-connector-java、lombok</code>依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="三：配置"><a href="#三：配置" class="headerlink" title="三：配置"></a>三：配置</h4><ul>
<li>在application.yml中配置数据库连接的相关信息</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/my_db</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">devil</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在 Spring Boot 启动类中添加 <code>@MapperScan</code> 注解，扫描 Mapper 文件夹：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.dyw.mybatisplus01pre.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlus01PreApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MybatisPlus01PreApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>借助lombok插件编写实体类 Student.java</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@TableId</span> 指定之间的方式：</span></span><br><span class="line"><span class="comment">     * value：主键字段的名称，如果时id，可以不用写</span></span><br><span class="line"><span class="comment">     * type:指定主键的类型，主键的值如何生成。idType.AUTO,表示自动增长</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">            type = IdType.AUTO</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编写Mapper接口 <code>StudentMapper.java</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义Mapper，就是Dao接口</span></span><br><span class="line"><span class="comment"> * 1.要继承BaseMapper</span></span><br><span class="line"><span class="comment"> * 2.指定实体类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * BaseMapper是Mp框架中的对象，定义了十七个方法（CRUD）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Student&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>测试类 测试</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MybatisPlus01PreApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentMapper studentMapper;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Student&gt; students = studentMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220121180912055.png" alt="image-20220121180912055"></p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>*　通过以上几个简单的步骤，我们就实现了 Student 表的 CRUD 功能，甚至连 XML 文件都不用编写！<br>*　从以上步骤中，我们可以看到集成<code>MyBatis-Plus</code>非常的简单，只需要引入 starter 工程，并配置 mapper 扫描路径即可。<br>*　<strong>对于mapper的扫描可以选择在启动类中写@MapperScan() 也可以在mapper接口上加@mapper 前者适合mapper接口多的情况 后者则书写更方便。</strong><br>*　在执行插入操作时 执行成功后 会将结果返回到传入的对象中（例如我们可以通过传入的对象获得主键自增长的主键值）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">People</span> <span class="variable">people1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>(<span class="literal">null</span>, <span class="string">&quot;王裴豫川&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> peopleMapper.insert(people1);</span><br><span class="line"></span><br><span class="line">        System.out.println(row&gt;<span class="number">0</span>?<span class="string">&quot;成功&quot;</span>:<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;主键id：&quot;</span>+people1.getId());</span><br><span class="line">        System.out.println();</span><br><span class="line">        List&lt;People&gt; people = peopleMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (People person : people) &#123;</span><br><span class="line">            System.out.println(person);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>​    可以看到我们没有对传入的对象的主键赋值（自动增长）但我们通过执行操作后的对象获得了插入到表中的该行数据的主    键 证实了上述结论</p>
<h2 id="Spring整合Mybatis-Plus"><a href="#Spring整合Mybatis-Plus" class="headerlink" title="Spring整合Mybatis-Plus"></a><strong>Spring整合Mybatis-Plus</strong></h2><ul>
<li>上面的快速开始我们介绍了通过SpringBoot整合MyBatis-Plus</li>
</ul>
<h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><p><strong>加入Spring依赖和数据库JDBC依赖后还需要加入Mybatis-Plus的依赖</strong></p>
<p><strong>引入 <code>MyBatis-Plus</code> 之后请不要再次引入 <code>MyBatis</code> 以及 <code>MyBatis-Spring</code>，以避免因版本差异导致的问题。</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>MyBatis-Plus 的配置异常的简单，我们仅需要一些简单的配置即可使用 MyBatis-Plus 的强大功能！</p>
<p>配置 MapperScan  spring.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.dyw.mapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><p>要想使用mybatis-plus的日志功能 需要在application.yml中添加如下语句</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<h2 id="CRUD接口"><a href="#CRUD接口" class="headerlink" title="CRUD接口"></a><strong>CRUD接口</strong></h2><h2 id="Service-CRUD-接口"><a href="#Service-CRUD-接口" class="headerlink" title="Service CRUD 接口"></a><a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/crud-interface.html#service-crud-%E6%8E%A5%E5%8F%A3">Service CRUD 接口</a></h2><blockquote>
<p>说明:</p>
<ul>
<li><p>通用 Service CRUD 封装<a target="_blank" rel="noopener" href="https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-extension/src/main/java/com/baomidou/mybatisplus/extension/service/IService.java">IService (opens new window)</a>接口，进一步封装 CRUD 采用 <code>get 查询单行</code> <code>remove 删除</code> <code>list 查询集合</code> <code>page 分页</code> 前缀命名方式区分 <code>Mapper</code> 层避免混淆，</p>
</li>
<li><p>泛型 <code>T</code> 为任意实体对象</p>
</li>
<li><p>建议如果存在自定义通用 Service 方法的可能，请创建自己的 <code>IBaseService</code> 继承 <code>Mybatis-Plus</code> 提供的基类</p>
</li>
<li><p>对象 <code>Wrapper</code> 为 <a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/wrapper.html">条件构造器</a></p>
</li>
<li><p>&#96;&#96;&#96;java<br>@SuppressWarnings(“all”)<br>public interface BookService extends IService<Book> {<br>&#x2F;&#x2F;boolean save(Book book);<br>&#x2F;&#x2F;boolean update(Book book);<br>&#x2F;&#x2F;boolean delete(Integer id);<br>&#x2F;&#x2F;Book getById(Integer id);<br>List<Book> getAll();<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 可以追加自定义操作 需要自己编写方法实体 模板如下</span><br><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @Service</span><br><span class="line">  @SuppressWarnings(&quot;all&quot;)</span><br><span class="line">  public class BookServiceImpl extends ServiceImpl&lt;BookMapper,Book&gt; implements BookService&#123;</span><br><span class="line">      @Autowired</span><br><span class="line">      private BookMapper mapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      @Override</span><br><span class="line">      public List&lt;Book&gt; getAll() &#123;</span><br><span class="line">          return null;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<hr>
<h2 id="Mapper-CRUD-接口"><a href="#Mapper-CRUD-接口" class="headerlink" title="Mapper CRUD 接口"></a><a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/crud-interface.html#mapper-crud-%E6%8E%A5%E5%8F%A3">Mapper CRUD 接口</a></h2><blockquote>
<p>说明:</p>
<ul>
<li>通用 CRUD 封装<a target="_blank" rel="noopener" href="https://gitee.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-core/src/main/java/com/baomidou/mybatisplus/core/mapper/BaseMapper.java">BaseMapper (opens new window)</a>接口，为 <code>Mybatis-Plus</code> 启动时自动解析实体表关系映射转换为 <code>Mybatis</code> 内部对象注入容器</li>
<li>泛型 <code>T</code> 为任意实体对象</li>
<li>参数 <code>Serializable</code> 为任意类型主键 <code>Mybatis-Plus</code> 不推荐使用复合主键约定每一张表都有自己的唯一 <code>id</code> 主键</li>
<li>对象 <code>Wrapper</code> 为 <a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/wrapper.html">条件构造器</a></li>
</ul>
</blockquote>
<hr>
<p>以下是Mapper接口中的CRUD方法介绍</p>
<h4 id="一-查询"><a href="#一-查询" class="headerlink" title="一:查询"></a>一:查询</h4><ol>
<li>selectById() 通过单个主键值查询 只需要传入主键值即可  <strong>SELECT id,name FROM people WHERE id&#x3D;?</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * selectById 根据单个主键值查询</span></span><br><span class="line"><span class="comment"> * 参数:主键值</span></span><br><span class="line"><span class="comment"> * 返回值:实体对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">People</span> <span class="variable">people1</span> <span class="operator">=</span> peopleMapper.selectById(<span class="number">1</span>);</span><br><span class="line">System.out.println(people1);</span><br></pre></td></tr></table></figure>

<p><strong>如果id值对应的行不存在 会返回空 所以一般使用会判断是否为空 再做其他操作</strong></p>
<ol start="2">
<li>selectBatchIds() 批处理查询 通过多个主键值的一个集合 来查询满足条件的数据 返回值是一个集合 如果没有满足条件的数据 则返回null  <strong>SELECT id,name FROM people WHERE id IN ( ? , ? , ? )</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * selectBatchIds 批处理查询 根据多个主键值查询</span></span><br><span class="line"><span class="comment"> * 参数:id的集合</span></span><br><span class="line"><span class="comment"> * 返回值:集合List&lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Integer&gt; collect = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>).collect(Collectors.toList());</span><br><span class="line">List&lt;People&gt; people1 = peopleMapper.selectBatchIds(collect);</span><br><span class="line">System.out.println(people1);</span><br><span class="line"><span class="keyword">for</span> (People people2 : people1) &#123;</span><br><span class="line">    System.out.println(people2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>selectByMap() 通过将多条件字段字段封装到map中 通过读取map中的值来拼接条件 来实现  <strong>SELECT id,name FROM people WHERE name &#x3D; ? AND id &#x3D; ?</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * selectMap 使用map封装多条件字段查询</span></span><br><span class="line"><span class="comment">  * 参数:Map&lt;String,Object&gt;</span></span><br><span class="line"><span class="comment">  * 返回值:集合List&lt;T&gt;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"> map.put(<span class="string">&quot;id&quot;</span>,<span class="number">1</span>);</span><br><span class="line"> map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;易顺坤&quot;</span>);</span><br><span class="line"> List&lt;People&gt; people1 = peopleMapper.selectByMap(map);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (People people2 : people1) &#123;</span><br><span class="line">     System.out.println(people2);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>4.selectList() 通过传入实体类 更具实体类中的字段值解析为条件 查询</p>
<p>……</p>
<p><strong>注意:</strong> 当select操作条件为null时默认查询表中全部数据</p>
<h4 id="二-更新"><a href="#二-更新" class="headerlink" title="二:更新"></a>二:更新</h4><ol>
<li>updateById(实体类对象);</li>
</ol>
<p>通过传入实体类对象根据实体类对象中的声明主键的值, 自动生成where条件 where id&#x3D;?  , 然后以实体类中的其他非null属性的值对表中的数据进行修改(<strong>注意:包装类的默认值是null 而基本数据类型默认值不一定是null 如int类型默认值是0</strong>)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新操作（update）</span></span><br><span class="line"><span class="comment">     * 通过对象的形式传入要修改的数据 默认修改传入对象中非null属性的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">        people.setId(<span class="number">2</span>);</span><br><span class="line">        people.setName(<span class="string">&quot;易顺坤&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * updateById()顾名思义就是条件是根据id的</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> peopleMapper.updateById(people);</span><br><span class="line">        System.out.println(i&gt;<span class="number">0</span>?<span class="string">&quot;cg&quot;</span>:<span class="string">&quot;sb&quot;</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;People&gt; people1 = peopleMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (People people2 : people1) &#123;</span><br><span class="line">            System.out.println(people2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="三-删除"><a href="#三-删除" class="headerlink" title="三:删除"></a>三:删除</h4><ol>
<li>deleteById 通过传入的实体类中声明的主键值 来生成where条件 delete from tablename where id &#x3D; ?  也可以直接传入一个id值</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> peopleMapper.deleteById(<span class="number">3</span>);</span><br><span class="line"><span class="comment">/**************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">people.setId(<span class="number">2</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* deleteById()顾名思义就是条件是根据id的</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> peopleMapper.deleteById(people);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>deleteByMap 将字段条件通过键值对的方式封装到map中 再调用deleteByMap方法 将map中的值读取填入where之后 多个字段以and方式连接 <strong>DELETE FROM people WHERE name &#x3D; ? AND id &#x3D; ?</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * deleteByMap()通过map存储条件字段键值对 多个字段 在where条件后用and连接</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * DELETE FROM people WHERE name = ? AND id = ?</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;id&quot;</span>,<span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;丁杨维&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> peopleMapper.deleteByMap(map);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>deleteBatchIds 通过id批量删除 是通过in关键字 填入where条件关键字之后 <strong>DELETE FROM people WHERE id IN ( ? , ? )</strong></li>
</ol>
<blockquote>
<ul>
<li><p>deleteBatchIds() 批处理方式:使用多个主键值,删除数据</p>
</li>
<li><p>参数:Collection&lt;? extends Serializable&gt; </p>
</li>
<li><p>返回值删除的记录数</p>
</li>
</ul>
</blockquote>
<hr>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">         * deleteBatchIds() 批处理方式:使用多个主键值,删除数据</span></span><br><span class="line"><span class="comment">         * 参数:Collection&lt;? extends Serializable&gt;</span></span><br><span class="line"><span class="comment">         * 返回值删除的记录数</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="number">4</span>);</span><br><span class="line">        list.add(<span class="number">6</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> peopleMapper.deleteBatchIds(list);</span><br></pre></td></tr></table></figure>

<p>新知识:可以通过Stream.Of().collect(Collectors.toList())的方式创建List集合</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">List&lt;?&gt; list = Stream.of(Object,Object....).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<h4 id="四-插入"><a href="#四-插入" class="headerlink" title="四:插入"></a>四:插入</h4><ul>
<li>insert() 通过创建一个实体对象 再调用mapper的insert方法即可完成插入 <strong>INSERT INTO people ( name ) VALUES ( ? )</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">People</span> <span class="variable">people1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>(<span class="literal">null</span>, <span class="string">&quot;fan&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> peopleMapper.insert(people1);</span><br></pre></td></tr></table></figure>

<h2 id="AR操作"><a href="#AR操作" class="headerlink" title="AR操作"></a><strong>AR操作</strong></h2><h4 id="ActiveRecord简介"><a href="#ActiveRecord简介" class="headerlink" title="ActiveRecord简介:"></a>ActiveRecord简介:</h4><ul>
<li>每一个数据库表对应创建一个类,类的每一个对象实例对应于数据库中表的一行记录;通常表的每个字段在类中都有相应的Field;</li>
<li>ActiveRecord 负责把自己持久化,在ActiveRecord中封装了对数据库的访问,通过对象自己实现CRUD,实现优雅的数据库操作</li>
<li>ActiveRecord也封住给你了部分业务逻辑.可以作为业务对象使用</li>
</ul>
<h4 id="快速开始-1"><a href="#快速开始-1" class="headerlink" title="快速开始"></a>快速开始</h4><ul>
<li>创建表</li>
<li>创建springboot整合mybatis-plus项目 与前面操作一致</li>
<li>编写实体类 继承Model<T>(这个Model时Mybatis-plus中的 这个Model中封装了很多crud方法实现机制 也是mybatis中的sqlsession)</li>
</ul>
<p>​    entity.People.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Devil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-01-21-23:08</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 使用AR,要求实体类需要继承MP中的Model</span></span><br><span class="line"><span class="comment"> *Model中提供了对数据库的CRUD的操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;People&gt; &#123;</span><br><span class="line">    <span class="comment">//定义属性,属性名和表的列名一样</span></span><br><span class="line">    <span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">            value = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            type = IdType.AUTO</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编写Mapper接口继承BaseMapper<T></li>
</ul>
<p>​    加上@Mapper注解</p>
<p>​    注意:<strong>我们后续使用不使用该mapper而是使用实体类的对象(继承了Model的原因 实体类对象已经具有了对数据库表的crud操作)</strong> 该mapper是不需要使用的,MP需要使用该mapper获取数据库的表的信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Devil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-01-21-23:22</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * PeopleMapper是不需要使用的,Mp需要使用PeopleMapper获取数据库的表的信息.</span></span><br><span class="line"><span class="comment"> * 如果不定义DeptMapper,MP会报错</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PeopleMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;People&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="AR的CRUD操作"><a href="#AR的CRUD操作" class="headerlink" title="AR的CRUD操作"></a>AR的CRUD操作</h4><h5 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h5><ul>
<li>创建一个实体对象 设置属性 再使用该对象调用继承来的insert方法 就可以完成插入操作</li>
<li>返回值是一个boolean值</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">people.setId(<span class="number">4</span>);</span><br><span class="line">people.setName(<span class="string">&quot;xie&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="variable">insert</span> <span class="operator">=</span> people.insert();</span><br></pre></td></tr></table></figure>

<h5 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h5><ul>
<li>deleteById() 创建一个实体对象 只需要设置属性主键值(也可不设置 直接在方法参数上写) 再调用该方法 就会识别主键值 并根据主键值进行删除操作 <strong>DELETE FROM people WHERE id&#x3D;?</strong></li>
<li>返回值是boolean(注意与其他操作不同 这里的删除操作只要语句正确就不会为false)</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">people.setId(<span class="number">5</span>);</span><br><span class="line"><span class="comment">/** 根据对象设置的主键id的值删除记录*/</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">delete</span> <span class="operator">=</span> people.deleteById();</span><br></pre></td></tr></table></figure>

<h5 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h5><ul>
<li>selectById() 创建一个实体对象 只需要设置属性主键值(也可不设置 直接在方法参数上写) 再调用该方法 就会识别主键值 并根据主键值进行查询操作 <strong>SELECT id,name FROM people WHERE id&#x3D;?</strong></li>
<li><strong>有记录返回值是一个Object 如果在创建实体类时继承Model设置了泛型那么返回值就是实体类的类型 无记录就是一个null</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">        people.setId(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">/** 根据对象设置的主键id的值查询记录*/</span></span><br><span class="line">        <span class="type">People</span> <span class="variable">people1</span> <span class="operator">=</span> people.selectById(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>还有如下方法</p>
<p><img src="https://gitee.com/Devildyw/blogimage/raw/master/img/image-20220122174725782.png" alt="image-20220122174725782"></p>
<h5 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h5><ol>
<li>updateById() 创建一个实体对象 设置属性主键值 和其他属性 调用对象的updateById()方法 它会自动识别主键值(前面我们创建类时 设置了主键信息)并 修改 <strong>默认修改对象中非空的值</strong><ul>
<li>返回值是boolean</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">People</span> <span class="variable">people</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">People</span>();</span><br><span class="line">        people.setId(<span class="number">1</span>);</span><br><span class="line">        people.setName(<span class="string">&quot;kun&quot;</span>);</span><br><span class="line">        <span class="comment">/** 根据对象设置的主键id的值更新记录*/</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">update</span> <span class="operator">=</span> people.updateById();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="主键类型"><a href="#主键类型" class="headerlink" title="主键类型"></a><strong>主键类型</strong></h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">IdType</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据库ID自增</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;该类型请确保数据库设置了 ID自增 否则无效&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    AUTO(<span class="number">0</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 该类型为未设置主键类型(注解里等于跟随全局,全局里约等于 INPUT)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    NONE(<span class="number">1</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户输入ID</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;该类型可以通过自己注册自动填充插件进行填充&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    INPUT(<span class="number">2</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 以下3种类型、只有当插入对象ID 为空，才自动填充。 */</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分配ID (主键类型为number或string）,</span></span><br><span class="line"><span class="comment">     * 默认实现类 &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.incrementer.DefaultIdentifierGenerator&#125;(雪花算法)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.3.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ASSIGN_ID(<span class="number">3</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分配UUID (主键类型为 string)</span></span><br><span class="line"><span class="comment">     * 默认实现类 &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.incrementer.DefaultIdentifierGenerator&#125;(UUID.replace(&quot;-&quot;,&quot;&quot;))</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ASSIGN_UUID(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> key;</span><br><span class="line"></span><br><span class="line">    IdType(<span class="type">int</span> key) &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过上述枚举类型 我们可以知道共有五种主键类型</p>
<p><strong>IdType</strong> 对于自动填充 只有当插入对象ID 为空，才自动填充。</p>
<ul>
<li><strong>0.NONE</strong> : 没有主键类型</li>
<li><strong>1.AUTO</strong> : 自动增长 前提是确保数据库设置了 ID自增 否则无效</li>
<li><strong>2.INPUT</strong> : 手工输入</li>
<li><strong>3.ASSIGN_ID</strong> :</li>
</ul>
<blockquote>
<p>分配ID (主键类型为number或string）  </p>
<p>默认实现类 {@link com.baomidou.mybatisplus.core.incrementer.DefaultIdentifierGenerator}(雪花算法) </p>
</blockquote>
<ul>
<li><strong>4.ASSIGN_UUID</strong> :</li>
</ul>
<blockquote>
<p> 分配UUID (主键类型为 string)</p>
<p>默认实现类 {@link com.baomidou.mybatisplus.core.incrementer.DefaultIdentifierGenerator}(UUID.replace(“-“,””))</p>
</blockquote>
<p>​    </p>
<h4 id="IdType-AUTO"><a href="#IdType-AUTO" class="headerlink" title="IdType.AUTO"></a>IdType.AUTO</h4><ol>
<li>表中建表使用数字作为主键, 设置主键id自增</li>
</ol>
<p>​    <img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122180836796.png" alt="image-20220122180836796"></p>
<ol start="2">
<li>实体类表中主键值也要为数字类型 并添加注解@TableId 设置主键以及主键类型</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;People&gt; &#123;</span><br><span class="line">    <span class="comment">//定义属性,属性名和表的列名一样</span></span><br><span class="line">    <span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">            value = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            type = IdType.AUTO</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="IdType-ASSIGN-ID"><a href="#IdType-ASSIGN-ID" class="headerlink" title="IdType.ASSIGN_ID"></a>IdType.ASSIGN_ID</h4><ol>
<li>使用时需要在数据库表中 需要取消主键自动增长 并且设置主键类型时bigint 因为这个主键的值很大 int类型大小不够 <strong>还可以使用varchar(50)类型</strong></li>
</ol>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122182035368.png" alt="image-20220122182035368"></p>
<ol start="2">
<li>实体类中将主键类型设置为Long原因与上述一样 并且设置注解@TableId中type的值为<strong>IdType.ASSIGN_ID</strong> <strong>如果数据库中主键使用varchar(50)那么相应的实体类中的主键类型也应当为String类型</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;People&gt; &#123;</span><br><span class="line">    <span class="comment">//定义属性,属性名和表的列名一样</span></span><br><span class="line">    <span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">            value = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            type = IdType.ASSIGN_ID</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> Long/String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122182324329.png" alt="image-20220122182324329"></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122182719124.png" alt="image-20220122182719124"></p>
<h4 id="IdType-ASSIGN-UUID"><a href="#IdType-ASSIGN-UUID" class="headerlink" title="IdType.ASSIGN_UUID"></a>IdType.ASSIGN_UUID</h4><ol>
<li>使用时需要在数据库表中, 将主键类型设置为varchar(50)类型</li>
</ol>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122183109184.png" alt="image-20220122183109184"></p>
<ol start="2">
<li>实体类中的主键类型设置为String类型 并且注解@TableId中需要将type设置为<strong>IdType.ASSIGN_UUID</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;People&gt; &#123;</span><br><span class="line">    <span class="comment">//定义属性,属性名和表的列名一样</span></span><br><span class="line">    <span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">            value = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            type = IdType.ASSIGN_UUID</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122183419332.png" alt="image-20220122183419332"></p>
<p>分布式中推荐使用 <strong>IdType.ASSIGN_ID</strong> 它可以生成数字而且长度更短更有规律</p>
<hr>
<h2 id="指定表名"><a href="#指定表名" class="headerlink" title="指定表名"></a><strong>指定表名</strong></h2><ul>
<li>定义实体类,默认的表名和实体类同名; 如果不一致,在实体类上面使用@TableName说明表名称</li>
<li>例如: <strong>@TableName(value&#x3D;”数据库表名”)</strong> </li>
<li>使用: 在实体类的上方</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(value = &quot;people&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> <span class="keyword">extends</span> <span class="title class_">Model</span>&lt;People&gt; &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="指定列名"><a href="#指定列名" class="headerlink" title="指定列名"></a><strong>指定列名</strong></h2><ul>
<li>在实际开发中, 不能完全出现实体类中的属性名与 数据库表中的列名完全一致; 如果不一致,在实体类上面使用@TableField完成两者之间的映射关系</li>
<li>例如:<strong>@TableField(value&#x3D;”数据库表中的列名”)</strong> 查询时需要将结果封装成一个一个的对象时 需要在@TableName中设置<strong>autoResultMap &#x3D; true</strong> 否则在使用了@TableField后可能会出现控制的情况</li>
<li>使用: 在实体类中的属性的上方</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义属性,属性名和表的列名一样</span></span><br><span class="line"><span class="meta">@TableId(</span></span><br><span class="line"><span class="meta">        value = &quot;pid&quot;,</span></span><br><span class="line"><span class="meta">        type = IdType.ASSIGN_UUID</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@TableField(value = &quot;pid&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String id;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="驼峰命名"><a href="#驼峰命名" class="headerlink" title="驼峰命名"></a>驼峰命名</h4><p>上述 在开发中使用@TableField指定属性与表中的列名的映射关系十分麻烦</p>
<p>一般在设计数据库表时采用下划线的方式命名 如<strong>user_name</strong></p>
<p>​    这就引申出Mybatis-plus的另一个特性 驼峰命名 即: <strong>列名使用下划线,属性名时驼峰命名的方式.Mybatis-plus默认支持这种规则.</strong> (即列名为: user_name  属性名为:userName 不需要使用@TableField Mybatis-plus同样能够识别)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">列名: people_name</span><br><span class="line">属性名: <span class="keyword">private</span> String peopleName;</span><br></pre></td></tr></table></figure>

<h2 id="自定义mapper"><a href="#自定义mapper" class="headerlink" title="自定义mapper"></a><strong>自定义mapper</strong></h2><p>自定义mapper</p>
<p>与mybatis一样 需要在创建一个接口写入自定义的方法 然后再编写一个mapper.xml文件 声明namespace 方法标签 resultType 和自定义方法</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dyw.mybatisplus05mapper.mapper.PersonMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllPerson&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.dyw.mybatisplus05mapper.entity.Person&quot;</span>&gt;</span></span><br><span class="line">        select pid,people_name from people order by pid</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>做完一切之后可以选择再mapper接口上加上@Mapper注解 或者 在启动类上加上@MapperScan(value&#x3D;”mapper接口路径”) 用来指明mapper的位置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PersonMapper</span> &#123;</span><br><span class="line">    List&lt;Person&gt; <span class="title function_">selectAllPerson</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后在application.yml中声明mapper.xml的路径</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:xml/*mapper.xml</span></span><br></pre></td></tr></table></figure>

<p><strong>这样的方法也同样适用于Springboot+mybatis(@Mapper&#x2F;@MapperScan+mapper.xml)</strong></p>
<p><strong>还有一种方法 @Mapper&#x2F;@MapperScan+@crud操作</strong> 也同样适用于mybatis 或者说正是因为mybatis有 所以mybatis-plus也支持</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">@SuppressWarnings(&quot;all&quot;)</span><br><span class="line">public interface PersonMapper &#123;</span><br><span class="line">    @Select(&quot;select pid,people_name from people order by pid&quot;)</span><br><span class="line">    List&lt;Person&gt; selectAllPerson();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Mapper和@MapperScan作用 告诉了程序mapper接口在哪 </p>
<h2 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a><strong>条件构造器</strong></h2><h4 id="条件构造器-Wrapper"><a href="#条件构造器-Wrapper" class="headerlink" title="条件构造器: Wrapper"></a>条件构造器: Wrapper</h4><p>QueryWrapper(LambdaQueryWrapper) 和 UpdateWrapper(LambdaUpdateWrapper)的父类 用于生成sql的where条件,entity属性也用于生成sql的where条件,MP3.0开始支持lambda表达式, LambdaQueryWrapper, LambdaUpdateWrapper 支持lambda表达式的构造查询条件</p>
<p><strong>注意:</strong> entity 生成的 where 条件与 使用各个 api 生成的 where 条件<strong>没有任何关联行为</strong></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122210417087.png" alt="image-20220122210417087"></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122210440192.png" alt="image-20220122210440192"></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122210457290.png" alt="image-20220122210457290"></p>
<p><img src="https://gitee.com/Devildyw/blogimage/raw/master/img/image-20220122210545890.png" alt="image-20220122210545890"></p>
<p><strong>使用时根据不同的crud操作选择不同的条件封装类</strong></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122211725390.png" alt="image-20220122211725390"></p>
<p>实际使用的例子都在官方文档中可以查看<a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/wrapper.html#abstractwrapper">条件构造器</a></p>
<p>具体使用</p>
<h5 id="allEq"><a href="#allEq" class="headerlink" title="allEq"></a>allEq</h5><h6 id="1-allEq-Map-lt-R-V-gt-params"><a href="#1-allEq-Map-lt-R-V-gt-params" class="headerlink" title="1. allEq(Map&lt;R, V&gt; params)"></a>1. allEq(Map&lt;R, V&gt; params)</h6><ul>
<li>根据不同的crud选择不同的条件封装类 创建相应的条件封装类实体 </li>
<li>由于要使用allEq(Map&lt;R, V&gt; params)方法, 它的参数是一个map 所以需要新建一个map, map中的键值对 就是条件 用<strong>and连接</strong></li>
<li>再调用mapper的方法将封装类实体传入</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 alleq</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*map&lt;key,value&gt; key:列名 value:条件的值 */</span></span><br><span class="line">map.put(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;people_name&quot;</span>,<span class="string">&quot;kun&quot;</span>);</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.allEq(map);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>



<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122212326283.png" alt="image-20220122212326283"></p>
<hr>
<h6 id="2-allEq-Map-lt-R-V-gt-params-boolean-null2IsNull"><a href="#2-allEq-Map-lt-R-V-gt-params-boolean-null2IsNull" class="headerlink" title="2. allEq(Map&lt;R, V&gt; params,boolean null2IsNull)"></a>2. allEq(Map&lt;R, V&gt; params,boolean null2IsNull)</h6><ul>
<li><p>后面的boolean值是用来处理传入的map中的value空值的.</p>
<blockquote>
<p>true: 将map中value控制用is 拼接</p>
<p>false: 忽略空value和key 不对该字段进行拼接</p>
</blockquote>
</li>
</ul>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122213108202.png" alt="image-20220122213108202"></p>
<p><img src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/image-20220122213134669.png" alt="image-20220122213134669"></p>
<hr>
<h5 id="eq-封装单个条件"><a href="#eq-封装单个条件" class="headerlink" title="eq: 封装单个条件"></a>eq: 封装单个条件</h5><h6 id="eq-R-column-Object-val-列名-值"><a href="#eq-R-column-Object-val-列名-值" class="headerlink" title="eq(R column, Object val): 列名,值"></a>eq(R column, Object val): 列名,值</h6><p>使用条件封装类的实体类的eq方法 调用直接填入列名和相应的值即可 是使用的’&#x3D;’连接</p>
<p><code>SELECT pid,people_name FROM people WHERE (pid = ?)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 eq</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.eq(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="ne-不等于"><a href="#ne-不等于" class="headerlink" title="ne:不等于"></a>ne:不等于</h5><h6 id="ne-R-column-Object-val-表示-lt-gt-和-x3D"><a href="#ne-R-column-Object-val-表示-lt-gt-和-x3D" class="headerlink" title="ne(R column, Object val) 表示&lt;&gt; 和 !&#x3D;"></a>ne(R column, Object val) 表示&lt;&gt; 和 !&#x3D;</h6><ul>
<li>使用列名, 值 通过&lt;&gt; 拼接  </li>
<li><code>Preparing: SELECT pid,people_name FROM people WHERE (pid &lt;&gt; ?)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 eq</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.ne(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="gt-大于"><a href="#gt-大于" class="headerlink" title="gt:大于"></a>gt:大于</h5><h6 id="gt-R-column-Object-val-表示-gt"><a href="#gt-R-column-Object-val-表示-gt" class="headerlink" title="gt(R column, Object val) 表示 &gt;"></a>gt(R column, Object val) 表示 &gt;</h6><ul>
<li>使用列名, 值 通过&gt; 拼接  </li>
<li><code>SELECT pid,people_name FROM people WHERE (pid &gt; ?)</code></li>
</ul>
<hr>
<h5 id="ge-大于等于"><a href="#ge-大于等于" class="headerlink" title="ge:大于等于"></a>ge:大于等于</h5><h6 id="ge-R-column-Object-val-表示-gt-x3D"><a href="#ge-R-column-Object-val-表示-gt-x3D" class="headerlink" title="ge(R column, Object val) 表示 &gt;&#x3D;"></a>ge(R column, Object val) 表示 &gt;&#x3D;</h6><ul>
<li>使用列名, 值 通过&gt;&#x3D; 拼接  </li>
<li><code>SELECT pid,people_name FROM people WHERE (pid &gt;= ?)</code></li>
</ul>
<hr>
<h5 id="lt-小于"><a href="#lt-小于" class="headerlink" title="lt:小于"></a>lt:小于</h5><h6 id="lt-R-column-Object-val-表示-lt"><a href="#lt-R-column-Object-val-表示-lt" class="headerlink" title="lt(R column, Object val) 表示 &lt;"></a>lt(R column, Object val) 表示 &lt;</h6><ul>
<li>使用列名, 值 通过&lt; 拼接  </li>
<li><code>SELECT pid,people_name FROM people WHERE (pid &lt; ?)</code></li>
</ul>
<hr>
<h5 id="le-小于等于"><a href="#le-小于等于" class="headerlink" title="le:小于等于"></a>le:小于等于</h5><h6 id="lt-R-column-Object-val-表示-lt-x3D"><a href="#lt-R-column-Object-val-表示-lt-x3D" class="headerlink" title="lt(R column, Object val) 表示 &lt;&#x3D;"></a>lt(R column, Object val) 表示 &lt;&#x3D;</h6><ul>
<li>使用列名, 值 通过&lt;&#x3D; 拼接  </li>
<li><code>SELECT pid,people_name FROM people WHERE (pid &lt;= ?)</code></li>
</ul>
<hr>
<h5 id="between-两个值范围之间-gt-x3D-and-lt-x3D"><a href="#between-两个值范围之间-gt-x3D-and-lt-x3D" class="headerlink" title="between: 两个值范围之间(&gt;&#x3D; and &lt;&#x3D;)"></a>between: 两个值范围之间(&gt;&#x3D; and &lt;&#x3D;)</h5><h6 id="1-between-R-column-Object-val1-Object-val2-列名-值1-值2"><a href="#1-between-R-column-Object-val1-Object-val2-列名-值1-值2" class="headerlink" title="1.between(R column, Object val1, Object val2) 列名 值1 值2"></a>1.between(R column, Object val1, Object val2) 列名 值1 值2</h6><ul>
<li><p>通过列名相同的两个值 来创建两个值范围之间的条件 通过<strong>between</strong>拼接</p>
</li>
<li><p><code>SELECT pid,people_name FROM people WHERE (pid BETWEEN ? AND ?)</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 between</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.between(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="2-notBetween-R-column-Object-val1-Object-val2-列名-值1-值2"><a href="#2-notBetween-R-column-Object-val1-Object-val2-列名-值1-值2" class="headerlink" title="2. notBetween(R column, Object val1, Object val2) 列名 值1 值2"></a>2. notBetween(R column, Object val1, Object val2) 列名 值1 值2</h6><ul>
<li><p>通过列名相同的两个值 来创建两个值范围之间的条件 通过<strong>between</strong>拼接</p>
</li>
<li><p><code>SELECT pid,people_name FROM people WHERE (pid NOT BETWEEN ? AND ?)</code></p>
</li>
</ul>
<hr>
<h5 id="like-模糊查询"><a href="#like-模糊查询" class="headerlink" title="like 模糊查询"></a>like 模糊查询</h5><h6 id="1-like-R-column-Object-val-列名-值"><a href="#1-like-R-column-Object-val-列名-值" class="headerlink" title="1. like(R column, Object val) 列名 值"></a>1. like(R column, Object val) 列名 值</h6><ul>
<li>like模糊查询 在值的前后都是用%拼接( %val% ) 查询之中存在val的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name LIKE ?)  Parameters: %k%(String)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 like</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.like(<span class="string">&quot;people_name&quot;</span>,<span class="string">&quot;k&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="2-notLike-R-column-Object-val-列名-值"><a href="#2-notLike-R-column-Object-val-列名-值" class="headerlink" title="2. notLike(R column, Object val) 列名 值"></a>2. notLike(R column, Object val) 列名 值</h6><ul>
<li>notLike模糊查询 在值的前后都是用%拼接( %val%)  查询之中不存在val的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name NOT LIKE ?)  Parameters: %k%(String)</code></li>
</ul>
<hr>
<h6 id="3-likeLeft-R-column-Object-val-列名-值"><a href="#3-likeLeft-R-column-Object-val-列名-值" class="headerlink" title="3. likeLeft(R column, Object val) 列名 值"></a>3. likeLeft(R column, Object val) 列名 值</h6><ul>
<li>likeLeft模糊查询 在值的左边用%拼接( %val)  查询以val结尾的的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name LIKE ?)  Parameters: %k(String)</code></li>
</ul>
<hr>
<h6 id="4-likeLeft-R-column-Object-val-列名-值"><a href="#4-likeLeft-R-column-Object-val-列名-值" class="headerlink" title="4. likeLeft(R column, Object val) 列名 值"></a>4. likeLeft(R column, Object val) 列名 值</h6><ul>
<li>likeLeft模糊查询 在值的右边用%拼接( val%)  查询以val开头的的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name LIKE ?)  Parameters: k%(String)</code></li>
</ul>
<hr>
<h5 id="null-判空"><a href="#null-判空" class="headerlink" title="null: 判空"></a>null: 判空</h5><h6 id="1-isNull-R-column-列名"><a href="#1-isNull-R-column-列名" class="headerlink" title="1.isNull(R column) 列名"></a>1.isNull(R column) 列名</h6><ul>
<li>判断所指列名为空的情况 以 is null 连接</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name IS NULL)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 like</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.isNull(<span class="string">&quot;people_name&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="1-isNull-R-column-列名-1"><a href="#1-isNull-R-column-列名-1" class="headerlink" title="1.isNull(R column) 列名"></a>1.isNull(R column) 列名</h6><ul>
<li>判断所指列名为不为空的情况 以 is not null 连接</li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name IS NOT NULL)</code></li>
</ul>
<hr>
<h5 id="in-集合查询"><a href="#in-集合查询" class="headerlink" title="in 集合查询"></a>in 集合查询</h5><h6 id="1-in-R-column-Object…-values-列名-值1…-也可以传入一个集合"><a href="#1-in-R-column-Object…-values-列名-值1…-也可以传入一个集合" class="headerlink" title="1. in(R column, Object… values) 列名,值1…..  也可以传入一个集合"></a>1. in(R column, Object… values) 列名,值1…..  也可以传入一个集合</h6><ul>
<li>in查询 将值封装到一个集合中 底层是or连接 查询满足集合范围中条件的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (pid IN (?,?,?))</code></li>
</ul>
<h6 id="2-notIn-R-column-Object…-values-列名-值1…-也可以传入一个集合"><a href="#2-notIn-R-column-Object…-values-列名-值1…-也可以传入一个集合" class="headerlink" title="2. notIn(R column, Object… values) 列名,值1…..  也可以传入一个集合"></a>2. notIn(R column, Object… values) 列名,值1…..  也可以传入一个集合</h6><ul>
<li>in查询 将值封装到一个集合中 底层是or连接 查询不符合集合范围中条件的数据</li>
<li><code>SELECT pid,people_name FROM people WHERE (pid NOT IN (?,?,?))</code></li>
</ul>
<hr>
<h5 id="inSql-子查询"><a href="#inSql-子查询" class="headerlink" title="inSql 子查询"></a>inSql 子查询</h5><h6 id="1-inSql-R-column-String-inValue-列名-子查询语句"><a href="#1-inSql-R-column-String-inValue-列名-子查询语句" class="headerlink" title="1. inSql(R column, String inValue) 列名, 子查询语句"></a>1. inSql(R column, String inValue) 列名, 子查询语句</h6><ul>
<li>类型于in(),  前面的列名用来筛选子查询结果中符合条件的值 将其放在in()的集合中 后续步骤与in查询一致  </li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name IN (select people_name from people where pid = 1))</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 inSql</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.inSql(<span class="string">&quot;people_name&quot;</span>,<span class="string">&quot;select people_name from people where pid = 1&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="2-notInSql-R-column-String-inValue-列名-子查询语句"><a href="#2-notInSql-R-column-String-inValue-列名-子查询语句" class="headerlink" title="2. notInSql(R column, String inValue) 列名, 子查询语句"></a>2. notInSql(R column, String inValue) 列名, 子查询语句</h6><ul>
<li>类型于notIn(),  前面的列名用来筛选子查询结果中符合条件的值 将其放在in()的集合中 后续步骤与notIn查询一致  </li>
<li><code>SELECT pid,people_name FROM people WHERE (people_name NOT IN (select people_name from people where pid = 1))</code></li>
</ul>
<hr>
<h5 id="groupBy-分组函数"><a href="#groupBy-分组函数" class="headerlink" title="groupBy 分组函数"></a>groupBy 分组函数</h5><h6 id="1-groupBy-R-column-列名"><a href="#1-groupBy-R-column-列名" class="headerlink" title="1. groupBy(R column): 列名"></a>1. groupBy(R column): 列名</h6><ul>
<li><p>在使用分组函数之前 需要调用Wrapper的select方法 指定要输出的参数 例如<code>select(&quot;people_name, count(*)&quot;);</code></p>
</li>
<li><p>按指定的列名进行分组</p>
</li>
<li><p><code>SELECT people_name, count(*) FROM people GROUP BY people_name</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 groupBy</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/*封装到Wrapper中*/</span></span><br><span class="line">qw.select(<span class="string">&quot;people_name, count(*)&quot;</span>);</span><br><span class="line">qw.groupBy(<span class="string">&quot;people_name&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="orderBy-排序"><a href="#orderBy-排序" class="headerlink" title="orderBy 排序"></a>orderBy 排序</h5><h6 id="1-orderByAsc-R-column-列名"><a href="#1-orderByAsc-R-column-列名" class="headerlink" title="1. orderByAsc(R column) 列名"></a>1. orderByAsc(R column) 列名</h6><ul>
<li><p>按列名字段升序排序 还可以设置多个列名字段 来作为第二排序字段 也可以是集合</p>
</li>
<li><p><code>SELECT pid,people_name FROM people ORDER BY pid ASC</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 orderBy</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">qw.orderByAsc(<span class="string">&quot;pid&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="2-orderByDesc-R-column-列名"><a href="#2-orderByDesc-R-column-列名" class="headerlink" title="2. orderByDesc(R column) 列名"></a>2. orderByDesc(R column) 列名</h6><ul>
<li><p>按列名字段降序排序 还可以设置多个列名字段 来作为第二排序字段 也可以是集合</p>
</li>
<li><p><code>SELECT pid,people_name FROM people ORDER BY pid DESC</code></p>
</li>
</ul>
<hr>
<h6 id="3-orderBy-boolean-condition-boolean-isAsc-R-column-条件-是否升序-列名字段"><a href="#3-orderBy-boolean-condition-boolean-isAsc-R-column-条件-是否升序-列名字段" class="headerlink" title="3. orderBy(boolean condition, boolean isAsc, R column) 条件 是否升序 列名字段"></a>3. orderBy(boolean condition, boolean isAsc, R column) 条件 是否升序 列名字段</h6><ul>
<li><p>按列isAsc来判断是否是升序 还是降序排序 还可以设置多个列名字段 来作为第二排序字段 也可以是集合</p>
</li>
<li><p><code>SELECT pid,people_name FROM people ORDER BY pid ASC/DESC</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 orderBy</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">qw.orderBy(<span class="literal">true</span>,<span class="literal">true</span>,<span class="string">&quot;pid&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<h6 id="4-多字段不同排序规则排序"><a href="#4-多字段不同排序规则排序" class="headerlink" title="4. 多字段不同排序规则排序"></a>4. 多字段不同排序规则排序</h6><ul>
<li><p>可以在上述的方法后再调用orderBy()相关方法 完成多字段不同排序规则排序 可拼接多个</p>
</li>
<li><p><code>qw.orderBy(true,true,&quot;pid&quot;).orderBy(true,false,&quot;people_name&quot;);</code></p>
</li>
<li><p><code>SELECT pid,people_name FROM people ORDER BY pid ASC,people_name DESC</code></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 orderBy</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">qw.orderBy(<span class="literal">true</span>,<span class="literal">true</span>,<span class="string">&quot;pid&quot;</span>).orderBy(<span class="literal">true</span>,<span class="literal">false</span>,<span class="string">&quot;people_name&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="or-and-连接词"><a href="#or-and-连接词" class="headerlink" title="or and 连接词"></a>or and 连接词</h5><h6 id="1-and"><a href="#1-and" class="headerlink" title="1. and"></a>1. and</h6><ul>
<li>与or() 有关 再显式调用or()方法时 时使用or来连接 不调用or()方法连接 默认使用and连接</li>
<li><code>qw.eq(&quot;pid&quot;,1).eq(&quot;people_name&quot;,&quot;k&quot;);</code></li>
<li><code>SELECT pid,people_name FROM people WHERE (pid = ? AND people_name = ?)</code></li>
</ul>
<hr>
<h6 id="2-or-无参"><a href="#2-or-无参" class="headerlink" title="2.or() 无参"></a>2.or() 无参</h6><ul>
<li>在单个条件方法后面使用 or() 再拼接另一个条件 以此类推 可拼接多个</li>
<li><code>qw.eq(&quot;pid&quot;,1).or().eq(&quot;people_name&quot;,&quot;k&quot;);</code></li>
<li><code>SELECT pid,people_name FROM people WHERE (pid = ? OR people_name = ?)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建条件构造器 or</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">qw.eq(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>).or().eq(<span class="string">&quot;people_name&quot;</span>,<span class="string">&quot;k&quot;</span>);</span><br><span class="line"><span class="comment">/*调用方法 将条件构造器填入*/</span></span><br><span class="line">List&lt;Person&gt; people = personMapper.selectList(qw);</span><br></pre></td></tr></table></figure>



<p>还有or 和 and 的嵌套用法 再官方文档可以了解<a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/wrapper.html#or">or and 的嵌套</a></p>
<hr>
<h5 id="last-末尾拼接"><a href="#last-末尾拼接" class="headerlink" title="last 末尾拼接"></a>last 末尾拼接</h5><h6 id="1-last-String-lastSql-拼接的sql语句"><a href="#1-last-String-lastSql-拼接的sql语句" class="headerlink" title="1. last(String lastSql) 拼接的sql语句"></a>1. last(String lastSql) 拼接的sql语句</h6><ul>
<li>无视优化规则直接拼接到 sql 的最后</li>
<li>会将参数中的sql语句 拼接到末尾 可以调用了方法之后调用</li>
<li><code>qw.gt(&quot;pid&quot;,1).last(&quot;limit 1,10&quot;);</code></li>
<li><code>SELECT pid,people_name FROM people WHERE (pid &gt; ?) limit 1,10</code></li>
</ul>
<p><strong>这种方法存在sql注入风险</strong></p>
<p>**注意: **只能调用一次,多次调用以最后一次为准 有sql注入的风险,请谨慎使用</p>
<hr>
<h5 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h5><h6 id="1-exists-String-existsSql-sql语句"><a href="#1-exists-String-existsSql-sql语句" class="headerlink" title="1. exists(String existsSql) sql语句"></a>1. exists(String existsSql) sql语句</h6><ul>
<li>判断参数中的sql语句 是否成立 符合条件即成立</li>
<li><code> qw.exists(&quot;select pid from people where pid &gt; 7&quot;);</code></li>
<li><code>SELECT pid,people_name FROM people WHERE (EXISTS (select pid from people where pid &gt; 7))</code></li>
</ul>
<hr>
<h6 id="1-notExists-String-existsSql-sql语句"><a href="#1-notExists-String-existsSql-sql语句" class="headerlink" title="1. notExists(String existsSql) sql语句"></a>1. notExists(String existsSql) sql语句</h6><ul>
<li>判断参数中的sql语句 是否成立 不符合条件即成立</li>
<li><code> qw.notExists(&quot;select pid from people where pid &lt;0 &quot;);</code></li>
<li><code>SELECT pid,people_name FROM people WHERE (NOT EXISTS (select pid from people where pid &lt;0 ))</code></li>
</ul>
<hr>
<h5 id="注意-1"><a href="#注意-1" class="headerlink" title="注意:"></a>注意:</h5><p>方法参数<strong>boolean condition</strong> (可以防止条件判断例如name!&#x3D;null)决定后面该条件是否添加 true:添加 false:不添加</p>
<hr>
<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a><strong>分页</strong></h2><h3 id="InnerInterceptor插件"><a href="#InnerInterceptor插件" class="headerlink" title="InnerInterceptor插件"></a>InnerInterceptor插件</h3><p>我们提供的插件都将基于此接口来实现功能</p>
<p>目前已有的功能:</p>
<ul>
<li>自动分页: <strong>PaginationInnerInterceptor</strong></li>
<li>多租户: TenantLineInnerInterceptor</li>
<li>动态表名: DynamicTableNameInnerInterceptor</li>
<li>乐观锁: OptimisticLockerInnerInterceptor</li>
<li>sql性能规范: IllegalSQLInnerInterceptor</li>
<li>防止全表更新与删除: BlockAttackInnerInterceptor</li>
</ul>
<p>前提: 配置分页插件,实现物理分页. 默认是内存分页</p>
<h3 id="spring-boot"><a href="#spring-boot" class="headerlink" title="spring-boot"></a>spring-boot</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;scan.your.mapper.package&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新的分页插件,一缓和二缓遵循mybatis的规则,需要设置 MybatisConfiguration#useDeprecatedExecutor = false 避免缓存出现问题(该属性会在旧插件移除后一同移除)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    @Bean</span></span><br><span class="line"><span class="comment">    public ConfigurationCustomizer configurationCustomizer() &#123;</span></span><br><span class="line"><span class="comment">        return configuration -&gt; configuration.setUseDeprecatedExecutor(false);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SpringBoot中创建配置上述配置类 @Configuration @Bean</p>
<p>将MybatisPlusInterceptor组件交给SpringBoot容器</p>
<p>再在使用的时候创建IPage接口对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">IPage&lt;Person&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;();<span class="comment">//也可使用有参构造</span></span><br></pre></td></tr></table></figure>

<p>设置完参数过后 使用mapper对象的selectPage方法 返回一个Ipage对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">IPage&lt;Person&gt; personIPage = peopleMapper.selectPage(page, qw);</span><br></pre></td></tr></table></figure>

<p>通过该对象 可以获得分页相关的信息(包括查询的记录)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">QueryWrapper&lt;Person&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        qw.ge(<span class="string">&quot;pid&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        IPage&lt;Person&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//设置分页的数据</span></span><br><span class="line"></span><br><span class="line">        page.setCurrent(<span class="number">1</span>);<span class="comment">//设置第几页</span></span><br><span class="line">        page.setSize(<span class="number">4</span>);<span class="comment">//显示多少条记录</span></span><br><span class="line">        IPage&lt;Person&gt; personIPage = peopleMapper.selectPage(page, qw);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取分页后的记录 getRecords()</span></span><br><span class="line">        List&lt;Person&gt; records = personIPage.getRecords();</span><br><span class="line">        System.out.println(records.size());</span><br><span class="line">        <span class="keyword">for</span> (Person record : records) &#123;</span><br><span class="line">            System.out.println(record);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//页数</span></span><br><span class="line">        System.out.println(personIPage.getPages());</span><br><span class="line">        <span class="comment">//总记录数</span></span><br><span class="line">        System.out.println(personIPage.getTotal());</span><br><span class="line">        <span class="comment">//当前页码</span></span><br><span class="line">        System.out.println(personIPage.getCurrent());</span><br><span class="line">        <span class="comment">//每页记录数</span></span><br><span class="line">        System.out.println(personIPage.getSize());</span><br></pre></td></tr></table></figure>



<p><strong>会根据指定的数据库选择分页操作</strong>(mysql是limit)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SELECT pid,people_name FROM people <span class="title function_">WHERE</span> <span class="params">(pid &gt;= ?)</span> LIMIT ?</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;@page&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;page:dbType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mysql&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="代码生成器"><a href="#代码生成器" class="headerlink" title="代码生成器"></a><strong><a target="_blank" rel="noopener" href="https://www.mybatis-plus.com/guide/generator-new.html#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8-3-5-1-%E7%89%88%E6%9C%AC">代码生成器</a></strong></h2><h4 id="优点"><a href="#优点" class="headerlink" title="优点:"></a>优点:</h4><p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。</p>
<blockquote>
<p>特别说明:</p>
<p>自定义模板有哪些可用参数？<a target="_blank" rel="noopener" href="https://github.com/baomidou/generator/blob/develop/mybatis-plus-generator/src/main/java/com/baomidou/mybatisplus/generator/engine/AbstractTemplateEngine.java">Github (opens new window)</a>AbstractTemplateEngine 类中方法 getObjectMap 返回 objectMap 的所有值都可用。</p>
</blockquote>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用:"></a>使用:</h4><p>添加依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">   // 注意！！当前包未传递依赖 mp 包，需要自己引入</span><br><span class="line">   <span class="comment">&lt;!--模板引擎--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在工程包下建立一个实体类(启动类)如下 修改相应的信息即可</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Generator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/my_db&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;devil&quot;</span>;</span><br><span class="line"></span><br><span class="line">        FastAutoGenerator.create(url,name,password)</span><br><span class="line">                <span class="comment">//全局配置</span></span><br><span class="line">                .globalConfig((scanner,builder) -&gt;</span><br><span class="line">                        builder.author(scanner.apply(<span class="string">&quot;Devil&quot;</span>))</span><br><span class="line">                                <span class="comment">//输出目录</span></span><br><span class="line">                                .outputDir(<span class="string">&quot;E:\\MyBatis\\mybatis-puls-07-generator&quot;</span>+<span class="string">&quot;\\src\\main\\java&quot;</span>)</span><br><span class="line">                                <span class="comment">//覆盖已生成的文件</span></span><br><span class="line">                                .fileOverride()</span><br><span class="line">                                <span class="comment">//禁止打开输出目录: 默认true</span></span><br><span class="line">                                .disableOpenDir()</span><br><span class="line">                )</span><br><span class="line">                <span class="comment">//包配置</span></span><br><span class="line">                .packageConfig((scanner,builder)-&gt;</span><br><span class="line">                        builder.parent(<span class="string">&quot;com.dyw.mybatispuls07generator&quot;</span>)</span><br><span class="line">                                <span class="comment">//自定义实体包名</span></span><br><span class="line">                                .entity(<span class="string">&quot;entity&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                <span class="comment">//策略配置</span></span><br><span class="line">                .strategyConfig((scanner,builder) -&gt;</span><br><span class="line">                        builder.addInclude(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">                                <span class="comment">//控制层配置</span></span><br><span class="line">                                .controllerBuilder().enableRestStyle().enableHyphenStyle()</span><br><span class="line">                                <span class="comment">//服务层配置</span></span><br><span class="line">                                .serviceBuilder()</span><br><span class="line">                                    <span class="comment">//去除服务接口的I前缀 %s表示实体类名:</span></span><br><span class="line">                                    .formatServiceFileName(<span class="string">&quot;%sServcie&quot;</span>)</span><br><span class="line">                                <span class="comment">//实体层配置</span></span><br><span class="line">                                .entityBuilder()</span><br><span class="line">                                .enableLombok()</span><br><span class="line">                                <span class="comment">//主键策略</span></span><br><span class="line">                                .idType(IdType.AUTO)</span><br><span class="line">                                <span class="comment">//时间自动填充</span></span><br><span class="line"><span class="comment">//                                .addTableFills(new Column(&quot;gmt_create&quot;, FieldFill.INSERT))</span></span><br><span class="line"><span class="comment">//                                .addTableFills(new Column(&quot;gmt_modified&quot;, FieldFill.INSERT_UPDATE))</span></span><br><span class="line">                                <span class="comment">//乐观锁</span></span><br><span class="line">                                .versionColumnName(<span class="string">&quot;version&quot;</span>)</span><br><span class="line">                                .versionPropertyName(<span class="string">&quot;version&quot;</span>)</span><br><span class="line">                                <span class="comment">//逻辑删除</span></span><br><span class="line">                                .logicDeleteColumnName(<span class="string">&quot;deleted&quot;</span>)</span><br><span class="line">                                .logicDeletePropertyName(<span class="string">&quot;deleted&quot;</span>)</span><br><span class="line">                ).templateEngine(<span class="keyword">new</span> <span class="title class_">VelocityTemplateEngine</span>()).execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><h3 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a><a target="_blank" rel="noopener" href="https://baomidou.com/pages/6b03c5/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">逻辑删除</a></h3><p><strong>简介:</strong> 通过在数据库中设定的逻辑删除字段 达到并未真正删除 而是逻辑删除的效果</p>
<p><strong>说明:</strong></p>
<ul>
<li><p>只针对Mybatis-plus自动注入的sql语句起效(即 自定义的sql不能享受)</p>
</li>
<li><p>插入: 不做限制</p>
</li>
<li><p>查找: 会在where条件后面过滤掉已删除数据,且使用wrapper.entity生产的where条件会忽略此字段(<strong>如有特殊要求 需要查询历史所有字段 需要自定义sql语句</strong>)</p>
</li>
<li><p>更新: 会追加where条件防止更新到已删除的数据, 且使用wrapper.entity生产的where条件会忽略此字段</p>
</li>
<li><p>删除: 转变为更新(即将逻辑删除字段设置为逻辑删除属性)</p>
</li>
</ul>
<p><strong>例如:</strong></p>
<ul>
<li>删除(实际sql): <code>update user set deleted=1 where id = 1 and deleted = 0 </code></li>
<li>查找(实际sql): <code>select id,name,deleted from user where deleted = 0</code></li>
</ul>
<p><strong>字段类型支持说明:</strong></p>
<ul>
<li>支持所有数据类型(推荐使用 <code>Integer</code>,<code>Boolean</code>,<code>LocalDateTime</code>)</li>
<li>如果数据库字段使用<code>datetime</code>,逻辑未删除值和已删除值支持配置为字符串<code>null</code>,另一个值支持配置为函数来获取值如<code>now()</code></li>
</ul>
<p><strong>附录:</strong></p>
<ul>
<li>逻辑删除是为了方便数据恢复和保护数据本身价值等等的一种方案，但实际就是删除。</li>
<li>如果你需要频繁查出来看就不应使用逻辑删除，而是以一个状态去表示。</li>
</ul>
<hr>
<p><strong>使用</strong>(pringBoot):</p>
<ul>
<li>配置 application.yml文件</li>
</ul>
<blockquote>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># logic-delete-field: flag # 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># 逻辑已删除值(默认为 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># 逻辑未删除值(默认为 0)</span></span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>在实体类的逻辑删除字段上添加@TableLogic注解(加上此字段可以不用配置logic-delete-field)</li>
</ul>
<blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给逻辑删除字段加上<span class="doctag">@TableLogic</span>注解 使其生效</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>配置完成后 正常调用mybatis-plus自动注入的sql语句即可</li>
</ul>
<hr>
<p><strong>注意</strong>: 数据库中的逻辑删除字段不要设置为 <strong><code>delete</code></strong> 敏感字段会报错</p>
<h3 id="通用枚举"><a href="#通用枚举" class="headerlink" title="通用枚举"></a><a target="_blank" rel="noopener" href="https://baomidou.com/pages/8390a4/#_1%E3%80%81%E5%A3%B0%E6%98%8E%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE%E5%B1%9E%E6%80%A7">通用枚举</a></h3><p><strong>简介:</strong> 使用mybatis-plus 通用枚举功能 可以在存储是存储value 查询自动显示为desc</p>
<hr>
<p><strong>使用:</strong> </p>
<blockquote>
<ul>
<li>方式一:  使用@EnumValue注解枚举属性</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">GradeEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    PRIMARY(<span class="number">1</span>, <span class="string">&quot;小学&quot;</span>),  SECONDORY(<span class="number">2</span>, <span class="string">&quot;中学&quot;</span>),  HIGH(<span class="number">3</span>, <span class="string">&quot;高中&quot;</span>);</span><br><span class="line"></span><br><span class="line">    GradeEnum(<span class="type">int</span> code, String descp) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.descp = descp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span><span class="comment">//标记数据库存的值是code</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String descp;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.descp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方式二: 枚举属性,实现IEnum接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">AgeEnum</span> <span class="keyword">implements</span> <span class="title class_">IEnum</span>&lt;Integer&gt; &#123;</span><br><span class="line">    ONE(<span class="number">1</span>, <span class="string">&quot;一岁&quot;</span>),</span><br><span class="line">    TWO(<span class="number">2</span>, <span class="string">&quot;二岁&quot;</span>),</span><br><span class="line">    THREE(<span class="number">3</span>, <span class="string">&quot;三岁&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//一定重写toString</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>配置扫描通用枚举(SpringBoot): </p>
<blockquote>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="comment"># 支持统配符 * 或者 ; 分割 通用枚举所在包</span></span><br><span class="line">    <span class="attr">typeEnumsPackage:</span> <span class="string">com.baomidou.springboot.entity.enums</span></span><br><span class="line">  <span class="string">....</span></span><br></pre></td></tr></table></figure>

<p>或是使用配置类配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusPropertiesCustomizer <span class="title function_">mybatisPlusPropertiesCustomizer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> properties -&gt; &#123;</span><br><span class="line">            <span class="type">GlobalConfig</span> <span class="variable">globalConfig</span> <span class="operator">=</span> properties.getGlobalConfig();</span><br><span class="line">            globalConfig.setBanner(<span class="literal">false</span>);</span><br><span class="line">            <span class="type">MybatisConfiguration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisConfiguration</span>();</span><br><span class="line">            configuration.setDefaultEnumTypeHandler(MybatisEnumTypeHandler.class);</span><br><span class="line">            properties.setConfiguration(configuration);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</blockquote>
</li>
</ul>
</blockquote>
<h3 id="自动填充功能"><a href="#自动填充功能" class="headerlink" title="自动填充功能"></a><a target="_blank" rel="noopener" href="https://baomidou.com/pages/4c6bcf/">自动填充功能</a></h3><p><strong>原理:</strong></p>
<ul>
<li>实现元对象处理器接口：com.baomidou.mybatisplus.core.handlers.MetaObjectHandler</li>
<li>注解填充字段 <code>@TableField(.. fill = FieldFill.INSERT)</code> 生成器策略部分也可以配置！</li>
</ul>
<ul>
<li><p>自定义实现类 MyMetaObjectHandler</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在这里配置insert时填充的字段</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        setFieldValByName(<span class="string">&quot;sex&quot;</span>, UserSexEnum.MAN,metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这里配置update时填充的字段</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置好了之后 只要指定字段再插入&#x2F;更新时 为null 就能自动填充</li>
</ul>
</li>
</ul>
<p><strong>注意:</strong></p>
<blockquote>
<ul>
<li>填充原理是直接给<code>entity</code>的属性设置值!!!</li>
<li>注解则是指定该属性在对应情况下必有值,如果无值则入库会是<code>null</code></li>
<li><code>MetaObjectHandler</code>提供的默认方法的策略均为:如果属性有值则不覆盖,如果填充值为<code>null</code>则不填充</li>
<li>字段必须声明<code>TableField</code>注解,属性<code>fill</code>选择对应策略,该声明告知<code>Mybatis-Plus</code>需要预留注入<code>SQL</code>字段</li>
<li>填充处理器<code>MyMetaObjectHandler</code>在 Spring Boot 中需要声明<code>@Component</code>或<code>@Bean</code>注入</li>
<li>要想根据注解<code>FieldFill.xxx</code>和<code>字段名</code>以及<code>字段类型</code>来区分必须使用父类的<code>strictInsertFill</code>或者<code>strictUpdateFill</code>方法</li>
<li>不需要根据任何来区分可以使用父类的<code>fillStrategy</code>方法</li>
<li>update(T t,Wrapper updateWrapper)时t不能为空,否则自动填充失效</li>
</ul>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Devil</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://devildyw.github.io/2022/02/28/MyBatis/">https://devildyw.github.io/2022/02/28/MyBatis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://devildyw.github.io" target="_blank">Devil的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/database/">database</a></div><div class="post_share"><div class="social-share" data-image="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-6omo76.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/02/28/SpringSecurity/"><img class="prev-cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-pk9eye.jpg" onerror="onerror=null;src='https://tva1.sinaimg.cn/large/832afe33ly1gbi8718jtpg20r00lc776.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringSecurity</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/28/Servlet/"><img class="next-cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-q2r727.jpg" onerror="onerror=null;src='https://tva1.sinaimg.cn/large/832afe33ly1gbi8718jtpg20r00lc776.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Servlet</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/04/09/%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%B5%8C%E5%A5%97/" title="事务的嵌套"><img class="cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-q2r727.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-09</div><div class="title">事务的嵌套</div></div></a></div><div><a href="/2022/02/28/%E6%95%B0%E6%8D%AE%E5%BA%93/" title="数据库(mysql)"><img class="cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-q2l83l.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-28</div><div class="title">数据库(mysql)</div></div></a></div><div><a href="/2022/02/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1/" title="数据库事务"><img class="cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-9mo7kw.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-28</div><div class="title">数据库事务</div></div></a></div><div><a href="/2022/03/28/Redis/" title="Redis"><img class="cover" src="https://ding-blog.oss-cn-chengdu.aliyuncs.com/images/wallhaven-9mo7kw.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-28</div><div class="title">Redis</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis"><span class="toc-number">1.</span> <span class="toc-text">MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-ssm-x3D-spring-springmvc-mybatis"><span class="toc-number">1.1.</span> <span class="toc-text">第一章(ssm &#x3D; spring + springmvc + mybatis)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">第二章：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A"><span class="toc-number">1.3.</span> <span class="toc-text">第三章：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%8A%A8%E6%80%81sql"><span class="toc-number">1.4.</span> <span class="toc-text">第四章动态sql</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.4.0.1.</span> <span class="toc-text">模糊查询:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A"><span class="toc-number">1.5.</span> <span class="toc-text">第五章：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9APageHelper"><span class="toc-number">1.6.</span> <span class="toc-text">第六章：PageHelper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number">1.7.</span> <span class="toc-text">MyBatis的缓存机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">一级缓存:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">注意：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.7.0.3.</span> <span class="toc-text">二级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">1.7.0.4.</span> <span class="toc-text">注意:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis-Plus"><span class="toc-number">2.</span> <span class="toc-text">MyBatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%80%A7"><span class="toc-number">2.1.1.</span> <span class="toc-text">特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.1.2.</span> <span class="toc-text">支持数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.3.</span> <span class="toc-text">框架结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">2.2.</span> <span class="toc-text">快速开始</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAboot%E5%B7%A5%E7%A8%8B%EF%BC%88SpringBoot-Initializr%EF%BC%89"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">一：创建一个boot工程（SpringBoot Initializr）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%EF%BC%9A%E5%BC%95%E5%85%A5mybatis-plus%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="toc-number">2.2.0.2.</span> <span class="toc-text">二：引入mybatis-plus相关依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%EF%BC%9A%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.0.3.</span> <span class="toc-text">三：配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">2.2.0.4.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E6%95%B4%E5%90%88Mybatis-Plus"><span class="toc-number">2.3.</span> <span class="toc-text">Spring整合Mybatis-Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">2.3.0.1.</span> <span class="toc-text">添加依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.0.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">2.4.</span> <span class="toc-text">日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.5.</span> <span class="toc-text">CRUD接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-CRUD-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.6.</span> <span class="toc-text">Service CRUD 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mapper-CRUD-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.7.</span> <span class="toc-text">Mapper CRUD 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.7.0.1.</span> <span class="toc-text">一:查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E6%9B%B4%E6%96%B0"><span class="toc-number">2.7.0.2.</span> <span class="toc-text">二:更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E5%88%A0%E9%99%A4"><span class="toc-number">2.7.0.3.</span> <span class="toc-text">三:删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E6%8F%92%E5%85%A5"><span class="toc-number">2.7.0.4.</span> <span class="toc-text">四:插入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AR%E6%93%8D%E4%BD%9C"><span class="toc-number">2.8.</span> <span class="toc-text">AR操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ActiveRecord%E7%AE%80%E4%BB%8B"><span class="toc-number">2.8.0.1.</span> <span class="toc-text">ActiveRecord简介:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B-1"><span class="toc-number">2.8.0.2.</span> <span class="toc-text">快速开始</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AR%E7%9A%84CRUD%E6%93%8D%E4%BD%9C"><span class="toc-number">2.8.0.3.</span> <span class="toc-text">AR的CRUD操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Insert"><span class="toc-number">2.8.0.3.1.</span> <span class="toc-text">Insert</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Delete"><span class="toc-number">2.8.0.3.2.</span> <span class="toc-text">Delete</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Select"><span class="toc-number">2.8.0.3.3.</span> <span class="toc-text">Select</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Update"><span class="toc-number">2.8.0.3.4.</span> <span class="toc-text">Update</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.9.</span> <span class="toc-text">主键类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IdType-AUTO"><span class="toc-number">2.9.0.1.</span> <span class="toc-text">IdType.AUTO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IdType-ASSIGN-ID"><span class="toc-number">2.9.0.2.</span> <span class="toc-text">IdType.ASSIGN_ID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IdType-ASSIGN-UUID"><span class="toc-number">2.9.0.3.</span> <span class="toc-text">IdType.ASSIGN_UUID</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%A1%A8%E5%90%8D"><span class="toc-number">2.10.</span> <span class="toc-text">指定表名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%88%97%E5%90%8D"><span class="toc-number">2.11.</span> <span class="toc-text">指定列名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D"><span class="toc-number">2.11.0.1.</span> <span class="toc-text">驼峰命名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89mapper"><span class="toc-number">2.12.</span> <span class="toc-text">自定义mapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">2.13.</span> <span class="toc-text">条件构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8-Wrapper"><span class="toc-number">2.13.0.1.</span> <span class="toc-text">条件构造器: Wrapper</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#allEq"><span class="toc-number">2.13.0.1.1.</span> <span class="toc-text">allEq</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-allEq-Map-lt-R-V-gt-params"><span class="toc-number">2.13.0.1.1.1.</span> <span class="toc-text">1. allEq(Map&lt;R, V&gt; params)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-allEq-Map-lt-R-V-gt-params-boolean-null2IsNull"><span class="toc-number">2.13.0.1.1.2.</span> <span class="toc-text">2. allEq(Map&lt;R, V&gt; params,boolean null2IsNull)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#eq-%E5%B0%81%E8%A3%85%E5%8D%95%E4%B8%AA%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.13.0.1.2.</span> <span class="toc-text">eq: 封装单个条件</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#eq-R-column-Object-val-%E5%88%97%E5%90%8D-%E5%80%BC"><span class="toc-number">2.13.0.1.2.1.</span> <span class="toc-text">eq(R column, Object val): 列名,值</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ne-%E4%B8%8D%E7%AD%89%E4%BA%8E"><span class="toc-number">2.13.0.1.3.</span> <span class="toc-text">ne:不等于</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ne-R-column-Object-val-%E8%A1%A8%E7%A4%BA-lt-gt-%E5%92%8C-x3D"><span class="toc-number">2.13.0.1.3.1.</span> <span class="toc-text">ne(R column, Object val) 表示&lt;&gt; 和 !&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gt-%E5%A4%A7%E4%BA%8E"><span class="toc-number">2.13.0.1.4.</span> <span class="toc-text">gt:大于</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#gt-R-column-Object-val-%E8%A1%A8%E7%A4%BA-gt"><span class="toc-number">2.13.0.1.4.1.</span> <span class="toc-text">gt(R column, Object val) 表示 &gt;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ge-%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E"><span class="toc-number">2.13.0.1.5.</span> <span class="toc-text">ge:大于等于</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ge-R-column-Object-val-%E8%A1%A8%E7%A4%BA-gt-x3D"><span class="toc-number">2.13.0.1.5.1.</span> <span class="toc-text">ge(R column, Object val) 表示 &gt;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lt-%E5%B0%8F%E4%BA%8E"><span class="toc-number">2.13.0.1.6.</span> <span class="toc-text">lt:小于</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#lt-R-column-Object-val-%E8%A1%A8%E7%A4%BA-lt"><span class="toc-number">2.13.0.1.6.1.</span> <span class="toc-text">lt(R column, Object val) 表示 &lt;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#le-%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E"><span class="toc-number">2.13.0.1.7.</span> <span class="toc-text">le:小于等于</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#lt-R-column-Object-val-%E8%A1%A8%E7%A4%BA-lt-x3D"><span class="toc-number">2.13.0.1.7.1.</span> <span class="toc-text">lt(R column, Object val) 表示 &lt;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#between-%E4%B8%A4%E4%B8%AA%E5%80%BC%E8%8C%83%E5%9B%B4%E4%B9%8B%E9%97%B4-gt-x3D-and-lt-x3D"><span class="toc-number">2.13.0.1.8.</span> <span class="toc-text">between: 两个值范围之间(&gt;&#x3D; and &lt;&#x3D;)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-between-R-column-Object-val1-Object-val2-%E5%88%97%E5%90%8D-%E5%80%BC1-%E5%80%BC2"><span class="toc-number">2.13.0.1.8.1.</span> <span class="toc-text">1.between(R column, Object val1, Object val2) 列名 值1 值2</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-notBetween-R-column-Object-val1-Object-val2-%E5%88%97%E5%90%8D-%E5%80%BC1-%E5%80%BC2"><span class="toc-number">2.13.0.1.8.2.</span> <span class="toc-text">2. notBetween(R column, Object val1, Object val2) 列名 值1 值2</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#like-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.13.0.1.9.</span> <span class="toc-text">like 模糊查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-like-R-column-Object-val-%E5%88%97%E5%90%8D-%E5%80%BC"><span class="toc-number">2.13.0.1.9.1.</span> <span class="toc-text">1. like(R column, Object val) 列名 值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-notLike-R-column-Object-val-%E5%88%97%E5%90%8D-%E5%80%BC"><span class="toc-number">2.13.0.1.9.2.</span> <span class="toc-text">2. notLike(R column, Object val) 列名 值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-likeLeft-R-column-Object-val-%E5%88%97%E5%90%8D-%E5%80%BC"><span class="toc-number">2.13.0.1.9.3.</span> <span class="toc-text">3. likeLeft(R column, Object val) 列名 值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-likeLeft-R-column-Object-val-%E5%88%97%E5%90%8D-%E5%80%BC"><span class="toc-number">2.13.0.1.9.4.</span> <span class="toc-text">4. likeLeft(R column, Object val) 列名 值</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#null-%E5%88%A4%E7%A9%BA"><span class="toc-number">2.13.0.1.10.</span> <span class="toc-text">null: 判空</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-isNull-R-column-%E5%88%97%E5%90%8D"><span class="toc-number">2.13.0.1.10.1.</span> <span class="toc-text">1.isNull(R column) 列名</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-isNull-R-column-%E5%88%97%E5%90%8D-1"><span class="toc-number">2.13.0.1.10.2.</span> <span class="toc-text">1.isNull(R column) 列名</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#in-%E9%9B%86%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.13.0.1.11.</span> <span class="toc-text">in 集合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-in-R-column-Object%E2%80%A6-values-%E5%88%97%E5%90%8D-%E5%80%BC1%E2%80%A6-%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88"><span class="toc-number">2.13.0.1.11.1.</span> <span class="toc-text">1. in(R column, Object… values) 列名,值1…..  也可以传入一个集合</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-notIn-R-column-Object%E2%80%A6-values-%E5%88%97%E5%90%8D-%E5%80%BC1%E2%80%A6-%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88"><span class="toc-number">2.13.0.1.11.2.</span> <span class="toc-text">2. notIn(R column, Object… values) 列名,值1…..  也可以传入一个集合</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#inSql-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.13.0.1.12.</span> <span class="toc-text">inSql 子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-inSql-R-column-String-inValue-%E5%88%97%E5%90%8D-%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.13.0.1.12.1.</span> <span class="toc-text">1. inSql(R column, String inValue) 列名, 子查询语句</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-notInSql-R-column-String-inValue-%E5%88%97%E5%90%8D-%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.13.0.1.12.2.</span> <span class="toc-text">2. notInSql(R column, String inValue) 列名, 子查询语句</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#groupBy-%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.13.0.1.13.</span> <span class="toc-text">groupBy 分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-groupBy-R-column-%E5%88%97%E5%90%8D"><span class="toc-number">2.13.0.1.13.1.</span> <span class="toc-text">1. groupBy(R column): 列名</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#orderBy-%E6%8E%92%E5%BA%8F"><span class="toc-number">2.13.0.1.14.</span> <span class="toc-text">orderBy 排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-orderByAsc-R-column-%E5%88%97%E5%90%8D"><span class="toc-number">2.13.0.1.14.1.</span> <span class="toc-text">1. orderByAsc(R column) 列名</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-orderByDesc-R-column-%E5%88%97%E5%90%8D"><span class="toc-number">2.13.0.1.14.2.</span> <span class="toc-text">2. orderByDesc(R column) 列名</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-orderBy-boolean-condition-boolean-isAsc-R-column-%E6%9D%A1%E4%BB%B6-%E6%98%AF%E5%90%A6%E5%8D%87%E5%BA%8F-%E5%88%97%E5%90%8D%E5%AD%97%E6%AE%B5"><span class="toc-number">2.13.0.1.14.3.</span> <span class="toc-text">3. orderBy(boolean condition, boolean isAsc, R column) 条件 是否升序 列名字段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-%E5%A4%9A%E5%AD%97%E6%AE%B5%E4%B8%8D%E5%90%8C%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99%E6%8E%92%E5%BA%8F"><span class="toc-number">2.13.0.1.14.4.</span> <span class="toc-text">4. 多字段不同排序规则排序</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#or-and-%E8%BF%9E%E6%8E%A5%E8%AF%8D"><span class="toc-number">2.13.0.1.15.</span> <span class="toc-text">or and 连接词</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-and"><span class="toc-number">2.13.0.1.15.1.</span> <span class="toc-text">1. and</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-or-%E6%97%A0%E5%8F%82"><span class="toc-number">2.13.0.1.15.2.</span> <span class="toc-text">2.or() 无参</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#last-%E6%9C%AB%E5%B0%BE%E6%8B%BC%E6%8E%A5"><span class="toc-number">2.13.0.1.16.</span> <span class="toc-text">last 末尾拼接</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-last-String-lastSql-%E6%8B%BC%E6%8E%A5%E7%9A%84sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.13.0.1.16.1.</span> <span class="toc-text">1. last(String lastSql) 拼接的sql语句</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#exists"><span class="toc-number">2.13.0.1.17.</span> <span class="toc-text">exists</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-exists-String-existsSql-sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.13.0.1.17.1.</span> <span class="toc-text">1. exists(String existsSql) sql语句</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-notExists-String-existsSql-sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.13.0.1.17.2.</span> <span class="toc-text">1. notExists(String existsSql) sql语句</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-1"><span class="toc-number">2.13.0.1.18.</span> <span class="toc-text">注意:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">2.14.</span> <span class="toc-text">分页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#InnerInterceptor%E6%8F%92%E4%BB%B6"><span class="toc-number">2.14.1.</span> <span class="toc-text">InnerInterceptor插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spring-boot"><span class="toc-number">2.14.2.</span> <span class="toc-text">spring-boot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-config-xml"><span class="toc-number">2.14.3.</span> <span class="toc-text">mybatis-config.xml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">2.15.</span> <span class="toc-text">代码生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">2.15.0.1.</span> <span class="toc-text">优点:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">2.15.0.2.</span> <span class="toc-text">使用:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95"><span class="toc-number">2.16.</span> <span class="toc-text">拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">2.16.1.</span> <span class="toc-text">逻辑删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-number">2.16.2.</span> <span class="toc-text">通用枚举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%8A%9F%E8%83%BD"><span class="toc-number">2.16.3.</span> <span class="toc-text">自动填充功能</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Devil</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">无它,唯手熟尔</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>